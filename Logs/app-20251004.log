2025-10-04 10:57:29.716 +05:30 [WRN] The foreign key property 'Order.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-04 10:57:29.802 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 10:57:29.803 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 10:57:43.428 +05:30 [WRN] The foreign key property 'Order.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-04 10:57:43.492 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 10:57:43.493 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 10:57:44.738 +05:30 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-04 10:57:44.751 +05:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-04 10:57:44.835 +05:30 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-04 10:57:44.951 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-04 10:57:44.959 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-04 10:57:44.961 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-04 10:57:45.008 +05:30 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-04 10:57:45.019 +05:30 [INF] Applying migration '20251004052732_AddOrders'.
2025-10-04 10:57:45.103 +05:30 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Order] DROP CONSTRAINT [FK_Order_Users_UserId];
2025-10-04 10:57:45.105 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Order] DROP CONSTRAINT [FK_Order_Users_UserId1];
2025-10-04 10:57:45.109 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [OrderItem] DROP CONSTRAINT [FK_OrderItem_Order_OrderId];
2025-10-04 10:57:45.113 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [OrderItem] DROP CONSTRAINT [FK_OrderItem_Products_ProductId];
2025-10-04 10:57:45.130 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [OrderItem] DROP CONSTRAINT [PK_OrderItem];
2025-10-04 10:57:45.141 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Order] DROP CONSTRAINT [PK_Order];
2025-10-04 10:57:58.805 +05:30 [INF] Executed DbCommand (13,664ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OrderItem]', N'OrderItems', 'OBJECT';
2025-10-04 10:58:08.192 +05:30 [INF] Executed DbCommand (9,387ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Order]', N'Orders', 'OBJECT';
2025-10-04 10:58:08.196 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OrderItems].[IX_OrderItem_ProductId]', N'IX_OrderItems_ProductId', 'INDEX';
2025-10-04 10:58:08.198 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OrderItems].[IX_OrderItem_OrderId]', N'IX_OrderItems_OrderId', 'INDEX';
2025-10-04 10:58:08.200 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Orders].[IX_Order_UserId1]', N'IX_Orders_UserId1', 'INDEX';
2025-10-04 10:58:08.201 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Orders].[IX_Order_UserId]', N'IX_Orders_UserId', 'INDEX';
2025-10-04 10:58:08.211 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [OrderItems] ADD CONSTRAINT [PK_OrderItems] PRIMARY KEY ([Id]);
2025-10-04 10:58:08.216 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Orders] ADD CONSTRAINT [PK_Orders] PRIMARY KEY ([Id]);
2025-10-04 10:58:08.222 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [OrderItems] ADD CONSTRAINT [FK_OrderItems_Orders_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Orders] ([Id]) ON DELETE CASCADE;
2025-10-04 10:58:08.224 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [OrderItems] ADD CONSTRAINT [FK_OrderItems_Products_ProductId] FOREIGN KEY ([ProductId]) REFERENCES [Products] ([Id]) ON DELETE NO ACTION;
2025-10-04 10:58:08.227 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Orders] ADD CONSTRAINT [FK_Orders_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION;
2025-10-04 10:58:08.234 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Orders] ADD CONSTRAINT [FK_Orders_Users_UserId1] FOREIGN KEY ([UserId1]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2025-10-04 10:58:08.254 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251004052732_AddOrders', N'9.0.9');
2025-10-04 10:58:08.264 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-04 12:12:57.077 +05:30 [INF] Starting up ShoeCartBackend...
2025-10-04 12:12:57.360 +05:30 [INF] User profile is available. Using 'C:\Users\rinsh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-04 12:12:57.713 +05:30 [INF] Now listening on: http://localhost:58477
2025-10-04 12:12:57.715 +05:30 [INF] Now listening on: https://localhost:58476
2025-10-04 12:12:57.814 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-04 12:12:57.816 +05:30 [INF] Hosting environment: Development
2025-10-04 12:12:57.818 +05:30 [INF] Content root path: C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend
2025-10-04 12:13:01.369 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:58477/ - null null
2025-10-04 12:13:01.722 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:58477/ - 307 0 null 412.8974ms
2025-10-04 12:13:01.855 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/ - null null
2025-10-04 12:13:01.922 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/ - 404 0 null 66.9232ms
2025-10-04 12:13:01.928 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:58476/, Response status code: 404
2025-10-04 12:13:06.104 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 12:13:06.183 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 79.3828ms
2025-10-04 12:13:06.220 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 12:13:06.224 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 12:13:06.231 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 11.4094ms
2025-10-04 12:13:06.321 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 97.1962ms
2025-10-04 12:13:06.416 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 12:13:06.440 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 24.7019ms
2025-10-04 12:23:21.023 +05:30 [INF] Starting up ShoeCartBackend...
2025-10-04 12:23:21.131 +05:30 [INF] User profile is available. Using 'C:\Users\rinsh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-04 12:23:21.435 +05:30 [INF] Now listening on: http://localhost:58477
2025-10-04 12:23:21.437 +05:30 [INF] Now listening on: https://localhost:58476
2025-10-04 12:23:21.567 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-04 12:23:21.569 +05:30 [INF] Hosting environment: Development
2025-10-04 12:23:21.570 +05:30 [INF] Content root path: C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend
2025-10-04 12:23:22.315 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:58477/ - null null
2025-10-04 12:23:22.596 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:58477/ - 307 0 null 292.8722ms
2025-10-04 12:23:22.700 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/ - null null
2025-10-04 12:23:22.789 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/ - 404 0 null 89.5009ms
2025-10-04 12:23:22.795 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:58476/, Response status code: 404
2025-10-04 12:23:24.234 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 12:23:24.326 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 92.5682ms
2025-10-04 12:23:24.361 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 12:23:24.365 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 12:23:24.375 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 14.3346ms
2025-10-04 12:23:24.436 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 71.6811ms
2025-10-04 12:23:24.500 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 12:23:24.525 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 25.5262ms
2025-10-04 12:27:13.471 +05:30 [INF] Starting up ShoeCartBackend...
2025-10-04 12:27:13.589 +05:30 [INF] User profile is available. Using 'C:\Users\rinsh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-04 12:27:13.909 +05:30 [INF] Now listening on: http://localhost:58477
2025-10-04 12:27:13.912 +05:30 [INF] Now listening on: https://localhost:58476
2025-10-04 12:27:14.008 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-04 12:27:14.010 +05:30 [INF] Hosting environment: Development
2025-10-04 12:27:14.011 +05:30 [INF] Content root path: C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend
2025-10-04 12:27:14.720 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:58477/ - null null
2025-10-04 12:27:14.964 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:58477/ - 307 0 null 255.3299ms
2025-10-04 12:27:15.065 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/ - null null
2025-10-04 12:27:15.145 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/ - 404 0 null 79.2588ms
2025-10-04 12:27:15.150 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:58476/, Response status code: 404
2025-10-04 12:27:18.322 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 12:27:18.443 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 121.0849ms
2025-10-04 12:27:18.488 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 12:27:18.493 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 12:27:18.498 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 10.1684ms
2025-10-04 12:27:18.536 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.2164ms
2025-10-04 12:27:18.613 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 12:27:18.633 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 20.7016ms
2025-10-04 12:27:49.374 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/place - application/json 250
2025-10-04 12:27:49.414 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-04 12:27:49.422 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-04 12:27:49.424 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/place - 401 0 null 50.2156ms
2025-10-04 12:28:15.588 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Auth/login - multipart/form-data; boundary=----WebKitFormBoundaryogdCmXUFSgae8kTu 269
2025-10-04 12:28:15.595 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend)'
2025-10-04 12:28:15.639 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ShoeCartBackend.DTOs.AuthDTO.LoginRequestDto) on controller ShoeCartBackend.Controllers.AuthController (ShoeCartBackend).
2025-10-04 12:28:16.676 +05:30 [WRN] The foreign key property 'Order.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-04 12:28:16.716 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 12:28:16.719 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 12:28:18.490 +05:30 [INF] Executed DbCommand (148ms) [Parameters=[@__loginRequestDto_Email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedBy], [u].[CreatedOn], [u].[DeletedBy], [u].[DeletedOn], [u].[Email], [u].[IsBlocked], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedOn], [u].[Name], [u].[PasswordHash], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginRequestDto_Email_0
2025-10-04 12:28:18.980 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 12:28:19.021 +05:30 [INF] Executed action ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend) in 3376.6152ms
2025-10-04 12:28:19.023 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend)'
2025-10-04 12:28:19.031 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Auth/login - 401 null application/json; charset=utf-8 3444.0341ms
2025-10-04 12:28:28.132 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Auth/login - multipart/form-data; boundary=----WebKitFormBoundaryiwdfTciIvcIbziMT 269
2025-10-04 12:28:28.138 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend)'
2025-10-04 12:28:28.141 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ShoeCartBackend.DTOs.AuthDTO.LoginRequestDto) on controller ShoeCartBackend.Controllers.AuthController (ShoeCartBackend).
2025-10-04 12:28:28.209 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__loginRequestDto_Email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedBy], [u].[CreatedOn], [u].[DeletedBy], [u].[DeletedOn], [u].[Email], [u].[IsBlocked], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedOn], [u].[Name], [u].[PasswordHash], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginRequestDto_Email_0
2025-10-04 12:28:28.557 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 12:28:28.572 +05:30 [INF] Executed action ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend) in 428.1964ms
2025-10-04 12:28:28.575 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend)'
2025-10-04 12:28:28.578 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Auth/login - 200 null application/json; charset=utf-8 446.1027ms
2025-10-04 12:28:48.592 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/place - application/json 250
2025-10-04 12:28:48.668 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend)'
2025-10-04 12:28:48.675 +05:30 [INF] Route matched with {action = "PlaceOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PlaceOrder(ShoeCartBackend.DTOs.PlaceOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 12:28:48.682 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend) in 4.682ms
2025-10-04 12:28:48.684 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend)'
2025-10-04 12:28:48.781 +05:30 [ERR] Unhandled Exception: Unable to resolve service for type 'ShoeCartBackend.Services.Interfaces.IOrderService' while attempting to activate 'ShoeCartBackend.Controllers.OrdersController'.
System.InvalidOperationException: Unable to resolve service for type 'ShoeCartBackend.Services.Interfaces.IOrderService' while attempting to activate 'ShoeCartBackend.Controllers.OrdersController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method128(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Middlewares\ExceptionMiddleware.cs:line 19
2025-10-04 12:28:48.843 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/place - 500 null application/json 252.2246ms
2025-10-04 12:30:17.509 +05:30 [INF] Starting up ShoeCartBackend...
2025-10-04 12:30:17.644 +05:30 [INF] User profile is available. Using 'C:\Users\rinsh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-04 12:30:17.982 +05:30 [INF] Now listening on: http://localhost:58477
2025-10-04 12:30:17.983 +05:30 [INF] Now listening on: https://localhost:58476
2025-10-04 12:30:18.336 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-04 12:30:18.339 +05:30 [INF] Hosting environment: Development
2025-10-04 12:30:18.342 +05:30 [INF] Content root path: C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend
2025-10-04 12:30:18.611 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:58477/ - null null
2025-10-04 12:30:18.919 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:58477/ - 307 0 null 339.4762ms
2025-10-04 12:30:19.034 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/ - null null
2025-10-04 12:30:19.113 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/ - 404 0 null 79.7766ms
2025-10-04 12:30:19.120 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:58476/, Response status code: 404
2025-10-04 12:30:21.084 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 12:30:21.171 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 87.7567ms
2025-10-04 12:30:21.209 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 12:30:21.213 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 12:30:21.226 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 17.0572ms
2025-10-04 12:30:21.260 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.9857ms
2025-10-04 12:30:21.328 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 12:30:21.353 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 24.8885ms
2025-10-04 12:30:39.438 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/place - application/json 262
2025-10-04 12:30:39.489 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenException: IDX10612: Decryption failed. Header.Enc is null or empty, it must be specified.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.DecryptToken(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWEAsync(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-10-04 12:30:39.546 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10612: Decryption failed. Header.Enc is null or empty, it must be specified.
2025-10-04 12:30:39.557 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-04 12:30:39.566 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-04 12:30:39.569 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/place - 401 0 null 131.2521ms
2025-10-04 12:31:16.500 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Auth/login - multipart/form-data; boundary=----WebKitFormBoundarylV2AnEyq55Zmlxae 269
2025-10-04 12:31:16.572 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend)'
2025-10-04 12:31:16.616 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ShoeCartBackend.DTOs.AuthDTO.LoginRequestDto) on controller ShoeCartBackend.Controllers.AuthController (ShoeCartBackend).
2025-10-04 12:31:17.555 +05:30 [WRN] The foreign key property 'Order.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-04 12:31:17.587 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 12:31:17.590 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 12:31:18.926 +05:30 [INF] Executed DbCommand (151ms) [Parameters=[@__loginRequestDto_Email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedBy], [u].[CreatedOn], [u].[DeletedBy], [u].[DeletedOn], [u].[Email], [u].[IsBlocked], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedOn], [u].[Name], [u].[PasswordHash], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginRequestDto_Email_0
2025-10-04 12:31:19.371 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 12:31:19.391 +05:30 [INF] Executed action ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend) in 2767.603ms
2025-10-04 12:31:19.393 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend)'
2025-10-04 12:31:19.403 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Auth/login - 200 null application/json; charset=utf-8 2903.0657ms
2025-10-04 12:31:38.143 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/place - application/json 262
2025-10-04 12:31:38.150 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend)'
2025-10-04 12:31:38.157 +05:30 [INF] Route matched with {action = "PlaceOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PlaceOrder(ShoeCartBackend.DTOs.PlaceOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 12:31:38.487 +05:30 [INF] Executed DbCommand (68ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[IsDeleted], [c1].[UserId], [s].[Id], [s].[CartId], [s].[ImageData], [s].[ImageMimeType], [s].[Name], [s].[Price], [s].[ProductId], [s].[Quantity], [s].[Size], [s].[Id0], [s].[Brand], [s].[CategoryId], [s].[CreatedBy], [s].[CreatedOn], [s].[CurrentStock], [s].[DeletedBy], [s].[DeletedOn], [s].[Description], [s].[InStock], [s].[IsActive], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedOn], [s].[Name0], [s].[Price0], [s].[SpecialOffer]
FROM (
    SELECT TOP(1) [c].[Id], [c].[IsDeleted], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[ImageData], [c0].[ImageMimeType], [c0].[Name], [c0].[Price], [c0].[ProductId], [c0].[Quantity], [c0].[Size], [p].[Id] AS [Id0], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name] AS [Name0], [p].[Price] AS [Price0], [p].[SpecialOffer]
    FROM [CartItems] AS [c0]
    INNER JOIN [Products] AS [p] ON [c0].[ProductId] = [p].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
2025-10-04 12:31:38.888 +05:30 [INF] Executed DbCommand (92ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BillingCity], [BillingCountry], [BillingState], [BillingStreet], [BillingZip], [CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [IsDeleted], [ModifiedBy], [ModifiedOn], [OrderStatus], [PaymentMethod], [PaymentStatus], [TotalAmount], [UserId], [UserId1])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2025-10-04 12:31:38.925 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'ShoeCartBackend.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Users_UserId1". The conflict occurred in database "ShoecartDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4ee5a616-a5cf-4816-9956-42aa29edf8a1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Users_UserId1". The conflict occurred in database "ShoecartDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4ee5a616-a5cf-4816-9956-42aa29edf8a1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-04 12:31:39.113 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend) in 953.5572ms
2025-10-04 12:31:39.115 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend)'
2025-10-04 12:31:39.240 +05:30 [ERR] Unhandled Exception: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Users_UserId1". The conflict occurred in database "ShoecartDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4ee5a616-a5cf-4816-9956-42aa29edf8a1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ShoeCartBackend.Services.OrderService.PlaceOrderAsync(PlaceOrderDto dto, Int32 userId) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Services\Implementations\OrderService.cs:line 50
   at ShoeCartBackend.Controllers.OrdersController.PlaceOrder(PlaceOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Controllers\OrderController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Middlewares\ExceptionMiddleware.cs:line 19
2025-10-04 12:31:39.284 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/place - 500 null application/json 1141.3039ms
2025-10-04 12:32:02.148 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 12:32:02.589 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 440.5489ms
2025-10-04 12:32:02.829 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 12:32:02.835 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 12:32:02.864 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 34.5938ms
2025-10-04 12:32:03.128 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 293.3927ms
2025-10-04 12:32:03.295 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 12:32:03.615 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 320.6431ms
2025-10-04 12:32:23.029 +05:30 [INF] Starting up ShoeCartBackend...
2025-10-04 12:32:23.144 +05:30 [INF] User profile is available. Using 'C:\Users\rinsh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-04 12:32:23.481 +05:30 [INF] Now listening on: http://localhost:58477
2025-10-04 12:32:23.482 +05:30 [INF] Now listening on: https://localhost:58476
2025-10-04 12:32:24.093 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:58477/ - null null
2025-10-04 12:32:24.198 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-04 12:32:24.201 +05:30 [INF] Hosting environment: Development
2025-10-04 12:32:24.202 +05:30 [INF] Content root path: C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend
2025-10-04 12:32:24.359 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:58477/ - 307 0 null 287.4774ms
2025-10-04 12:32:24.468 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/ - null null
2025-10-04 12:32:24.558 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/ - 404 0 null 90.7358ms
2025-10-04 12:32:24.576 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:58476/, Response status code: 404
2025-10-04 12:32:26.904 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 12:32:27.025 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 122.3587ms
2025-10-04 12:32:27.072 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 12:32:27.076 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 12:32:27.082 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 9.9418ms
2025-10-04 12:32:27.124 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.1256ms
2025-10-04 12:32:27.190 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 12:32:27.217 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 27.8729ms
2025-10-04 12:32:57.550 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/api/Cart - null null
2025-10-04 12:32:57.677 +05:30 [INF] Executing endpoint 'CartController.Get (ShoeCartBackend)'
2025-10-04 12:32:57.716 +05:30 [INF] Route matched with {action = "Get", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller CartController (ShoeCartBackend).
2025-10-04 12:32:58.710 +05:30 [WRN] The foreign key property 'Order.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-04 12:32:58.755 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 12:32:58.758 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 12:33:00.063 +05:30 [INF] Executed DbCommand (170ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[IsDeleted], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[ImageData], [c0].[ImageMimeType], [c0].[Name], [c0].[Price], [c0].[ProductId], [c0].[Quantity], [c0].[Size]
FROM (
    SELECT TOP(1) [c].[Id], [c].[IsDeleted], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
2025-10-04 12:33:00.173 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 12:33:00.196 +05:30 [INF] Executed action CartController.Get (ShoeCartBackend) in 2473.915ms
2025-10-04 12:33:00.198 +05:30 [INF] Executed endpoint 'CartController.Get (ShoeCartBackend)'
2025-10-04 12:33:00.210 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/api/Cart - 200 null application/json; charset=utf-8 2662.2041ms
2025-10-04 12:33:49.639 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/place - multipart/form-data; boundary=----WebKitFormBoundarywh2p1WfPffWpch9Q 697
2025-10-04 12:33:49.653 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend)'
2025-10-04 12:33:49.677 +05:30 [INF] Route matched with {action = "PlaceOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PlaceOrder(ShoeCartBackend.DTOs.PlaceOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 12:33:49.737 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-04 12:33:49.764 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend) in 82.0941ms
2025-10-04 12:33:49.766 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend)'
2025-10-04 12:33:49.768 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/place - 400 null application/problem+json; charset=utf-8 129.7208ms
2025-10-04 12:34:15.114 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/place - multipart/form-data; boundary=----WebKitFormBoundaryDcYDE5vuvcH9YwEL 834
2025-10-04 12:34:15.130 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend)'
2025-10-04 12:34:15.132 +05:30 [INF] Route matched with {action = "PlaceOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PlaceOrder(ShoeCartBackend.DTOs.PlaceOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 12:34:16.149 +05:30 [INF] Executed DbCommand (871ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[IsDeleted], [c1].[UserId], [s].[Id], [s].[CartId], [s].[ImageData], [s].[ImageMimeType], [s].[Name], [s].[Price], [s].[ProductId], [s].[Quantity], [s].[Size], [s].[Id0], [s].[Brand], [s].[CategoryId], [s].[CreatedBy], [s].[CreatedOn], [s].[CurrentStock], [s].[DeletedBy], [s].[DeletedOn], [s].[Description], [s].[InStock], [s].[IsActive], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedOn], [s].[Name0], [s].[Price0], [s].[SpecialOffer]
FROM (
    SELECT TOP(1) [c].[Id], [c].[IsDeleted], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[ImageData], [c0].[ImageMimeType], [c0].[Name], [c0].[Price], [c0].[ProductId], [c0].[Quantity], [c0].[Size], [p].[Id] AS [Id0], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name] AS [Name0], [p].[Price] AS [Price0], [p].[SpecialOffer]
    FROM [CartItems] AS [c0]
    INNER JOIN [Products] AS [p] ON [c0].[ProductId] = [p].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
2025-10-04 12:34:16.643 +05:30 [INF] Executed DbCommand (236ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BillingCity], [BillingCountry], [BillingState], [BillingStreet], [BillingZip], [CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [IsDeleted], [ModifiedBy], [ModifiedOn], [OrderStatus], [PaymentMethod], [PaymentStatus], [TotalAmount], [UserId], [UserId1])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2025-10-04 12:34:16.708 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'ShoeCartBackend.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Users_UserId1". The conflict occurred in database "ShoecartDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:eb549b8d-2b31-432e-b11a-b095fc6b1222
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Users_UserId1". The conflict occurred in database "ShoecartDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:eb549b8d-2b31-432e-b11a-b095fc6b1222
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-04 12:34:16.870 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend) in 1735.1365ms
2025-10-04 12:34:16.875 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend)'
2025-10-04 12:34:17.017 +05:30 [ERR] Unhandled Exception: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Users_UserId1". The conflict occurred in database "ShoecartDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:eb549b8d-2b31-432e-b11a-b095fc6b1222
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ShoeCartBackend.Services.OrderService.PlaceOrderAsync(PlaceOrderDto dto, Int32 userId) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Services\Implementations\OrderService.cs:line 50
   at ShoeCartBackend.Controllers.OrdersController.PlaceOrder(PlaceOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Controllers\OrderController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Middlewares\ExceptionMiddleware.cs:line 19
2025-10-04 12:34:17.055 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/place - 500 null application/json 1941.4969ms
2025-10-04 12:41:19.298 +05:30 [INF] Starting up ShoeCartBackend...
2025-10-04 12:41:19.575 +05:30 [INF] User profile is available. Using 'C:\Users\rinsh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-04 12:41:19.920 +05:30 [INF] Now listening on: http://localhost:58477
2025-10-04 12:41:19.922 +05:30 [INF] Now listening on: https://localhost:58476
2025-10-04 12:41:20.512 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:58477/ - null null
2025-10-04 12:41:20.699 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-04 12:41:20.702 +05:30 [INF] Hosting environment: Development
2025-10-04 12:41:20.706 +05:30 [INF] Content root path: C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend
2025-10-04 12:41:20.868 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:58477/ - 307 0 null 373.9969ms
2025-10-04 12:41:20.997 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/ - null null
2025-10-04 12:41:21.093 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/ - 404 0 null 96.0463ms
2025-10-04 12:41:21.101 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:58476/, Response status code: 404
2025-10-04 12:41:24.673 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 12:41:24.805 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 132.5406ms
2025-10-04 12:41:24.847 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 12:41:24.852 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 12:41:24.861 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 13.9784ms
2025-10-04 12:41:24.922 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 69.9558ms
2025-10-04 12:41:25.019 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 12:41:25.045 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 26.4929ms
2025-10-04 12:41:49.327 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/place - application/json 262
2025-10-04 12:41:49.475 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend)'
2025-10-04 12:41:49.514 +05:30 [INF] Route matched with {action = "PlaceOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PlaceOrder(ShoeCartBackend.DTOs.PlaceOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 12:41:50.545 +05:30 [WRN] The foreign key property 'Order.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-04 12:41:50.582 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 12:41:50.584 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 12:41:52.199 +05:30 [INF] Executed DbCommand (212ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[IsDeleted], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[ImageData], [c0].[ImageMimeType], [c0].[Name], [c0].[Price], [c0].[ProductId], [c0].[Quantity], [c0].[Size]
FROM (
    SELECT TOP(1) [c].[Id], [c].[IsDeleted], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
2025-10-04 12:41:52.547 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend) in 3026.6067ms
2025-10-04 12:41:52.553 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend)'
2025-10-04 12:41:52.686 +05:30 [ERR] Unhandled Exception: 'object' does not contain a definition for 'Length'
Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 'object' does not contain a definition for 'Length'
   at CallSite.Target(Closure, CallSite, Object)
   at System.Dynamic.UpdateDelegates.UpdateAndExecute1[T0,TRet](CallSite site, T0 arg0)
   at ShoeCartBackend.Services.OrderService.PlaceOrderAsync(PlaceOrderDto dto, Int32 userId) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Services\Implementations\OrderService.cs:line 30
   at ShoeCartBackend.Controllers.OrdersController.PlaceOrder(PlaceOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Controllers\OrderController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Middlewares\ExceptionMiddleware.cs:line 19
2025-10-04 12:41:52.774 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/place - 500 null application/json 3446.359ms
2025-10-04 12:42:08.985 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/place - application/json 262
2025-10-04 12:42:08.994 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend)'
2025-10-04 12:42:08.997 +05:30 [INF] Route matched with {action = "PlaceOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PlaceOrder(ShoeCartBackend.DTOs.PlaceOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 12:42:09.077 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[IsDeleted], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[ImageData], [c0].[ImageMimeType], [c0].[Name], [c0].[Price], [c0].[ProductId], [c0].[Quantity], [c0].[Size]
FROM (
    SELECT TOP(1) [c].[Id], [c].[IsDeleted], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
2025-10-04 12:42:09.144 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend) in 144.2376ms
2025-10-04 12:42:09.146 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend)'
2025-10-04 12:42:09.205 +05:30 [ERR] Unhandled Exception: 'object' does not contain a definition for 'Length'
Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 'object' does not contain a definition for 'Length'
   at CallSite.Target(Closure, CallSite, Object)
   at ShoeCartBackend.Services.OrderService.PlaceOrderAsync(PlaceOrderDto dto, Int32 userId) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Services\Implementations\OrderService.cs:line 30
   at ShoeCartBackend.Controllers.OrdersController.PlaceOrder(PlaceOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Controllers\OrderController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Middlewares\ExceptionMiddleware.cs:line 19
2025-10-04 12:42:09.213 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/place - 500 null application/json 228.9866ms
2025-10-04 12:42:18.485 +05:30 [INF] Starting up ShoeCartBackend...
2025-10-04 12:42:18.579 +05:30 [INF] User profile is available. Using 'C:\Users\rinsh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-04 12:42:18.826 +05:30 [INF] Now listening on: http://localhost:58477
2025-10-04 12:42:18.828 +05:30 [INF] Now listening on: https://localhost:58476
2025-10-04 12:42:18.934 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-04 12:42:18.937 +05:30 [INF] Hosting environment: Development
2025-10-04 12:42:18.938 +05:30 [INF] Content root path: C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend
2025-10-04 12:42:19.433 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:58477/ - null null
2025-10-04 12:42:19.729 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:58477/ - 307 0 null 314.7366ms
2025-10-04 12:42:19.810 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/ - null null
2025-10-04 12:42:19.893 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/ - 404 0 null 83.0182ms
2025-10-04 12:42:19.902 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:58476/, Response status code: 404
2025-10-04 12:42:21.974 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 12:42:22.095 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 121.9421ms
2025-10-04 12:42:22.168 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 12:42:22.174 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 12:42:22.178 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 10.2645ms
2025-10-04 12:42:22.218 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.9052ms
2025-10-04 12:42:22.436 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 12:42:22.474 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 38.5452ms
2025-10-04 12:42:34.674 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/place - application/json 262
2025-10-04 12:42:34.804 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend)'
2025-10-04 12:42:34.844 +05:30 [INF] Route matched with {action = "PlaceOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PlaceOrder(ShoeCartBackend.DTOs.PlaceOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 12:42:35.757 +05:30 [WRN] The foreign key property 'Order.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-04 12:42:35.799 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 12:42:35.802 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 12:42:50.994 +05:30 [ERR] An error occurred using the connection to database 'ShoecartDb' on server 'RINSHAD\SQLEXPRESS'.
2025-10-04 12:42:51.039 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'ShoeCartBackend.Data.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=60; handshake=24; [Login] initialization=2; authentication=7; [Post-Login] complete=14010; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:17ac1dc8-9f80-4cfc-9a4d-63ccf88b3798
Error Number:-2,State:0,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=60; handshake=24; [Login] initialization=2; authentication=7; [Post-Login] complete=14010; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:17ac1dc8-9f80-4cfc-9a4d-63ccf88b3798
Error Number:-2,State:0,Class:11
2025-10-04 12:42:51.202 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend) in 16352.7941ms
2025-10-04 12:42:51.206 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend)'
2025-10-04 12:42:51.214 +05:30 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=60; handshake=24; [Login] initialization=2; authentication=7; [Post-Login] complete=14010; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CartService.GetCartForUserAsync(Int32 userId) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Services\Implementations\CartService.cs:line 59
   at ShoeCartBackend.Services.OrderService.PlaceOrderAsync(PlaceOrderDto dto, Int32 userId) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Services\Implementations\OrderService.cs:line 28
   at ShoeCartBackend.Controllers.OrdersController.PlaceOrder(PlaceOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Controllers\OrderController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:17ac1dc8-9f80-4cfc-9a4d-63ccf88b3798
Error Number:-2,State:0,Class:11
2025-10-04 12:42:51.268 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/place - 500 null text/plain; charset=utf-8 16594.7208ms
2025-10-04 12:44:08.026 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/place - application/json 274
2025-10-04 12:44:08.047 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend)'
2025-10-04 12:44:08.050 +05:30 [INF] Route matched with {action = "PlaceOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PlaceOrder(ShoeCartBackend.DTOs.PlaceOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 12:44:22.140 +05:30 [ERR] An error occurred using the connection to database 'ShoecartDb' on server 'RINSHAD\SQLEXPRESS'.
2025-10-04 12:44:22.144 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'ShoeCartBackend.Data.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=2; handshake=2; [Login] initialization=0; authentication=0; [Post-Login] complete=14010; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:dff36f3b-bf33-4855-9670-84513a11e941
Error Number:-2,State:0,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=2; handshake=2; [Login] initialization=0; authentication=0; [Post-Login] complete=14010; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:dff36f3b-bf33-4855-9670-84513a11e941
Error Number:-2,State:0,Class:11
2025-10-04 12:44:22.256 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend) in 14202.8834ms
2025-10-04 12:44:22.260 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.PlaceOrder (ShoeCartBackend)'
2025-10-04 12:44:22.262 +05:30 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=2; handshake=2; [Login] initialization=0; authentication=0; [Post-Login] complete=14010; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CartService.GetCartForUserAsync(Int32 userId) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Services\Implementations\CartService.cs:line 59
   at ShoeCartBackend.Services.OrderService.PlaceOrderAsync(PlaceOrderDto dto, Int32 userId) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Services\Implementations\OrderService.cs:line 28
   at ShoeCartBackend.Controllers.OrdersController.PlaceOrder(PlaceOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Controllers\OrderController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:dff36f3b-bf33-4855-9670-84513a11e941
Error Number:-2,State:0,Class:11
2025-10-04 12:44:22.280 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/place - 500 null text/plain; charset=utf-8 14255.4435ms
2025-10-04 12:44:34.815 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 12:44:34.850 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 34.528ms
2025-10-04 12:44:34.918 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 12:44:34.919 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 12:44:34.936 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 17.3611ms
2025-10-04 12:44:34.980 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 62.6204ms
2025-10-04 12:44:35.134 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 12:44:35.185 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 51.3365ms
2025-10-04 12:44:47.020 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/place - application/json 262
2025-10-04 12:44:47.029 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-04 12:44:47.044 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-04 12:44:47.047 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/place - 401 0 null 26.7635ms
2025-10-04 14:52:42.019 +05:30 [WRN] The foreign key property 'Order.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-04 14:52:42.079 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 14:52:42.079 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 14:52:55.875 +05:30 [WRN] The foreign key property 'Order.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-04 14:52:55.933 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 14:52:55.934 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 14:53:15.375 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-04 14:53:15.385 +05:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-04 14:53:15.454 +05:30 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-04 14:53:15.521 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-04 14:53:15.528 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-04 14:53:15.529 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-04 14:53:15.560 +05:30 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-04 14:53:15.568 +05:30 [INF] Applying migration '20251004092242_FixCartItemProductProperty'.
2025-10-04 14:53:15.612 +05:30 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251004092242_FixCartItemProductProperty', N'9.0.9');
2025-10-04 14:53:15.616 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-04 14:58:03.170 +05:30 [INF] Starting up ShoeCartBackend...
2025-10-04 14:58:03.295 +05:30 [INF] User profile is available. Using 'C:\Users\rinsh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-04 14:58:03.678 +05:30 [INF] Now listening on: http://localhost:58477
2025-10-04 14:58:03.682 +05:30 [INF] Now listening on: https://localhost:58476
2025-10-04 14:58:04.064 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-04 14:58:04.068 +05:30 [INF] Hosting environment: Development
2025-10-04 14:58:04.071 +05:30 [INF] Content root path: C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend
2025-10-04 14:58:05.238 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:58477/ - null null
2025-10-04 14:58:05.839 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:58477/ - 307 0 null 624.5831ms
2025-10-04 14:58:06.815 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/ - null null
2025-10-04 14:58:06.986 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/ - 404 0 null 170.0978ms
2025-10-04 14:58:07.042 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:58476/, Response status code: 404
2025-10-04 14:58:13.115 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 14:58:13.197 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 82.5887ms
2025-10-04 14:58:13.235 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 14:58:13.266 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 30.957ms
2025-10-04 14:58:13.279 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 14:58:13.331 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.5435ms
2025-10-04 14:58:13.445 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 14:58:13.479 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 33.681ms
2025-10-04 14:58:41.710 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Auth/login - multipart/form-data; boundary=----WebKitFormBoundaryIlTw7NjcP08MtW61 269
2025-10-04 14:58:41.761 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend)'
2025-10-04 14:58:41.816 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ShoeCartBackend.DTOs.AuthDTO.LoginRequestDto) on controller ShoeCartBackend.Controllers.AuthController (ShoeCartBackend).
2025-10-04 14:58:42.722 +05:30 [WRN] The foreign key property 'Order.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-04 14:58:42.762 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 14:58:42.765 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 14:58:44.211 +05:30 [INF] Executed DbCommand (186ms) [Parameters=[@__loginRequestDto_Email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedBy], [u].[CreatedOn], [u].[DeletedBy], [u].[DeletedOn], [u].[Email], [u].[IsBlocked], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedOn], [u].[Name], [u].[PasswordHash], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginRequestDto_Email_0
2025-10-04 14:58:44.733 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 14:58:44.753 +05:30 [INF] Executed action ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend) in 2930.5411ms
2025-10-04 14:58:44.755 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend)'
2025-10-04 14:58:44.766 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Auth/login - 200 null application/json; charset=utf-8 3055.8709ms
2025-10-04 14:59:32.078 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 162
2025-10-04 14:59:32.155 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend)'
2025-10-04 14:59:32.163 +05:30 [INF] Route matched with {action = "Checkout", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 14:59:32.172 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend) in 5.4208ms
2025-10-04 14:59:32.175 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend)'
2025-10-04 14:59:32.246 +05:30 [ERR] Unhandled Exception: Unable to resolve service for type 'ShoeCartBackend.Services.Interfaces.IOrderService' while attempting to activate 'ShoeCartBackend.Controllers.OrdersController'.
System.InvalidOperationException: Unable to resolve service for type 'ShoeCartBackend.Services.Interfaces.IOrderService' while attempting to activate 'ShoeCartBackend.Controllers.OrdersController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method128(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Middlewares\ExceptionMiddleware.cs:line 19
2025-10-04 14:59:32.308 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 500 null application/json 230.5987ms
2025-10-04 14:59:55.170 +05:30 [INF] Starting up ShoeCartBackend...
2025-10-04 14:59:55.286 +05:30 [INF] User profile is available. Using 'C:\Users\rinsh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-04 14:59:55.537 +05:30 [INF] Now listening on: http://localhost:58477
2025-10-04 14:59:55.538 +05:30 [INF] Now listening on: https://localhost:58476
2025-10-04 14:59:55.636 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-04 14:59:55.639 +05:30 [INF] Hosting environment: Development
2025-10-04 14:59:55.641 +05:30 [INF] Content root path: C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend
2025-10-04 14:59:58.017 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:58477/ - null null
2025-10-04 14:59:58.285 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:58477/ - 307 0 null 280.6792ms
2025-10-04 14:59:58.422 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/ - null null
2025-10-04 14:59:58.547 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/ - 404 0 null 125.2622ms
2025-10-04 14:59:58.554 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:58476/, Response status code: 404
2025-10-04 15:00:06.249 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 15:00:06.337 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 87.7594ms
2025-10-04 15:00:06.370 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 15:00:06.381 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 11.5823ms
2025-10-04 15:00:06.409 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 15:00:06.454 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.1342ms
2025-10-04 15:00:06.585 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 15:00:06.615 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 31.1317ms
2025-10-04 15:00:19.368 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 164
2025-10-04 15:00:19.489 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend)'
2025-10-04 15:00:19.532 +05:30 [INF] Route matched with {action = "Checkout", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 15:00:20.588 +05:30 [WRN] The foreign key property 'Order.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-04 15:00:20.624 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 15:00:20.626 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 15:00:21.845 +05:30 [INF] Executed DbCommand (148ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CartId], [c].[ImageData], [c].[ImageMimeType], [c].[Name], [c].[Price], [c].[ProductId], [c].[Quantity], [c].[Size], [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c0].[Id], [c0].[IsDeleted], [c0].[UserId]
FROM [CartItems] AS [c]
INNER JOIN [Carts] AS [c0] ON [c].[CartId] = [c0].[Id]
INNER JOIN [Products] AS [p] ON [c].[ProductId] = [p].[Id]
WHERE [c0].[UserId] = @__userId_0
2025-10-04 15:00:22.156 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend) in 2618.0821ms
2025-10-04 15:00:22.161 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend)'
2025-10-04 15:00:22.261 +05:30 [ERR] Unhandled Exception: Not enough stock for Air Zoom Runner
System.Exception: Not enough stock for Air Zoom Runner
   at ShoeCartBackend.Services.OrderService.CreateOrderAsync(Int32 userId, CreateOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Services\Implementations\OrderService.cs:line 42
   at ShoeCartBackend.Controllers.OrdersController.Checkout(CreateOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Controllers\OrderController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Middlewares\ExceptionMiddleware.cs:line 19
2025-10-04 15:00:22.329 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 500 null application/json 2961.4164ms
2025-10-04 15:01:00.776 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 177
2025-10-04 15:01:00.799 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend)'
2025-10-04 15:01:00.801 +05:30 [INF] Route matched with {action = "Checkout", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 15:01:00.820 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-04 15:01:00.847 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend) in 43.3675ms
2025-10-04 15:01:00.849 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend)'
2025-10-04 15:01:00.850 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 400 null application/problem+json; charset=utf-8 74.583ms
2025-10-04 15:01:15.870 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 170
2025-10-04 15:01:15.877 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend)'
2025-10-04 15:01:15.878 +05:30 [INF] Route matched with {action = "Checkout", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 15:01:15.887 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-04 15:01:15.890 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend) in 8.2876ms
2025-10-04 15:01:15.891 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend)'
2025-10-04 15:01:15.893 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 400 null application/problem+json; charset=utf-8 22.4917ms
2025-10-04 15:01:59.722 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 168
2025-10-04 15:01:59.737 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend)'
2025-10-04 15:01:59.738 +05:30 [INF] Route matched with {action = "Checkout", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 15:01:59.792 +05:30 [INF] Executed DbCommand (25ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CartId], [c].[ImageData], [c].[ImageMimeType], [c].[Name], [c].[Price], [c].[ProductId], [c].[Quantity], [c].[Size], [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c0].[Id], [c0].[IsDeleted], [c0].[UserId]
FROM [CartItems] AS [c]
INNER JOIN [Carts] AS [c0] ON [c].[CartId] = [c0].[Id]
INNER JOIN [Products] AS [p] ON [c].[ProductId] = [p].[Id]
WHERE [c0].[UserId] = @__userId_0
2025-10-04 15:01:59.868 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend) in 125.3402ms
2025-10-04 15:01:59.869 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend)'
2025-10-04 15:01:59.931 +05:30 [ERR] Unhandled Exception: Not enough stock for Air Zoom Runner
System.Exception: Not enough stock for Air Zoom Runner
   at ShoeCartBackend.Services.OrderService.CreateOrderAsync(Int32 userId, CreateOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Services\Implementations\OrderService.cs:line 42
   at ShoeCartBackend.Controllers.OrdersController.Checkout(CreateOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Controllers\OrderController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Middlewares\ExceptionMiddleware.cs:line 19
2025-10-04 15:01:59.938 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 500 null application/json 216.8181ms
2025-10-04 15:05:01.439 +05:30 [INF] User profile is available. Using 'C:\Users\rinsh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-04 15:05:01.821 +05:30 [INF] Now listening on: http://localhost:58477
2025-10-04 15:05:01.824 +05:30 [INF] Now listening on: https://localhost:58476
2025-10-04 15:05:02.551 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-04 15:05:02.786 +05:30 [INF] Hosting environment: Development
2025-10-04 15:05:02.791 +05:30 [INF] Content root path: C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend
2025-10-04 15:05:02.896 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:58477/ - null null
2025-10-04 15:05:03.396 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:58477/ - 307 0 null 517.1623ms
2025-10-04 15:05:03.560 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/ - null null
2025-10-04 15:05:03.789 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/ - 404 0 null 229.557ms
2025-10-04 15:05:03.796 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:58476/, Response status code: 404
2025-10-04 15:05:05.647 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 15:05:06.005 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 357.8386ms
2025-10-04 15:05:06.080 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 15:05:06.096 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 15:05:06.143 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 63.9806ms
2025-10-04 15:05:06.259 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 163.255ms
2025-10-04 15:05:06.432 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 15:05:06.545 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 113.7215ms
2025-10-04 15:05:53.622 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 168
2025-10-04 15:05:53.822 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend)'
2025-10-04 15:05:53.868 +05:30 [INF] Route matched with {action = "Checkout", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 15:05:55.093 +05:30 [WRN] The foreign key property 'Order.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-04 15:05:55.137 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 15:05:55.139 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 15:06:00.199 +05:30 [INF] Executed DbCommand (140ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CartId], [c].[ImageData], [c].[ImageMimeType], [c].[Name], [c].[Price], [c].[ProductId], [c].[Quantity], [c].[Size], [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c0].[Id], [c0].[IsDeleted], [c0].[UserId]
FROM [CartItems] AS [c]
INNER JOIN [Carts] AS [c0] ON [c].[CartId] = [c0].[Id]
INNER JOIN [Products] AS [p] ON [c].[ProductId] = [p].[Id]
WHERE [c0].[UserId] = @__userId_0
2025-10-04 15:06:00.489 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend) in 6613.8956ms
2025-10-04 15:06:00.493 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend)'
2025-10-04 15:06:00.501 +05:30 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Not enough stock for Air Zoom Runner
   at ShoeCartBackend.Services.OrderService.CreateOrderAsync(Int32 userId, CreateOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Services\Implementations\OrderService.cs:line 42
   at ShoeCartBackend.Controllers.OrdersController.Checkout(CreateOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Controllers\OrderController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-04 15:06:00.576 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 500 null text/plain; charset=utf-8 6954.6924ms
2025-10-04 15:08:04.671 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Auth/login - multipart/form-data; boundary=----WebKitFormBoundaryLgfrGAmI6ss8k6si 255
2025-10-04 15:08:04.713 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend)'
2025-10-04 15:08:04.755 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ShoeCartBackend.DTOs.AuthDTO.LoginRequestDto) on controller ShoeCartBackend.Controllers.AuthController (ShoeCartBackend).
2025-10-04 15:08:04.997 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[@__loginRequestDto_Email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedBy], [u].[CreatedOn], [u].[DeletedBy], [u].[DeletedOn], [u].[Email], [u].[IsBlocked], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedOn], [u].[Name], [u].[PasswordHash], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginRequestDto_Email_0
2025-10-04 15:08:05.457 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 15:08:05.514 +05:30 [INF] Executed action ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend) in 757.1121ms
2025-10-04 15:08:05.517 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend)'
2025-10-04 15:08:05.521 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Auth/login - 200 null application/json; charset=utf-8 852.9133ms
2025-10-04 15:09:01.527 +05:30 [INF] Request starting HTTP/2 PUT https://localhost:58476/api/Products - multipart/form-data; boundary=----WebKitFormBoundaryAl9P5wHFxwBlkN4s 906
2025-10-04 15:09:01.538 +05:30 [INF] Executing endpoint 'ProductsController.Update (ShoeCartBackend)'
2025-10-04 15:09:01.551 +05:30 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(UpdateProductDTO) on controller ProductsController (ShoeCartBackend).
2025-10-04 15:09:01.706 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-04 15:09:01.754 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@__dto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p2].[Id], [p2].[Brand], [p2].[CategoryId], [p2].[CreatedBy], [p2].[CreatedOn], [p2].[CurrentStock], [p2].[DeletedBy], [p2].[DeletedOn], [p2].[Description], [p2].[InStock], [p2].[IsActive], [p2].[IsDeleted], [p2].[ModifiedBy], [p2].[ModifiedOn], [p2].[Name], [p2].[Price], [p2].[SpecialOffer], [p0].[Id], [p0].[CreatedBy], [p0].[CreatedOn], [p0].[DeletedBy], [p0].[DeletedOn], [p0].[IsDeleted], [p0].[ModifiedBy], [p0].[ModifiedOn], [p0].[ProductId], [p0].[Size], [p1].[Id], [p1].[CreatedBy], [p1].[CreatedOn], [p1].[DeletedBy], [p1].[DeletedOn], [p1].[ImageData], [p1].[ImageMimeType], [p1].[IsDeleted], [p1].[IsMain], [p1].[ModifiedBy], [p1].[ModifiedOn], [p1].[ProductId]
FROM (
    SELECT TOP(2) [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer]
    FROM [Products] AS [p]
    WHERE [p].[Id] = @__dto_Id_0
) AS [p2]
LEFT JOIN [ProductSize] AS [p0] ON [p2].[Id] = [p0].[ProductId]
LEFT JOIN [ProductImage] AS [p1] ON [p2].[Id] = [p1].[ProductId]
ORDER BY [p2].[Id], [p0].[Id]
2025-10-04 15:09:01.892 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CurrentStock] = @p0, [IsActive] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-10-04 15:09:01.911 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[ProductDTO, ShoeCartBackend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-04 15:09:01.923 +05:30 [INF] Executed action ProductsController.Update (ShoeCartBackend) in 369.3929ms
2025-10-04 15:09:01.925 +05:30 [INF] Executed endpoint 'ProductsController.Update (ShoeCartBackend)'
2025-10-04 15:09:01.927 +05:30 [INF] Request finished HTTP/2 PUT https://localhost:58476/api/Products - 200 null application/json; charset=utf-8 400.1946ms
2025-10-04 15:09:16.465 +05:30 [INF] Request starting HTTP/2 PUT https://localhost:58476/api/Products - multipart/form-data; boundary=----WebKitFormBoundarycihRRCKx0JRQTDBk 906
2025-10-04 15:09:16.472 +05:30 [INF] Executing endpoint 'ProductsController.Update (ShoeCartBackend)'
2025-10-04 15:09:16.474 +05:30 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(UpdateProductDTO) on controller ProductsController (ShoeCartBackend).
2025-10-04 15:09:16.493 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p2].[Id], [p2].[Brand], [p2].[CategoryId], [p2].[CreatedBy], [p2].[CreatedOn], [p2].[CurrentStock], [p2].[DeletedBy], [p2].[DeletedOn], [p2].[Description], [p2].[InStock], [p2].[IsActive], [p2].[IsDeleted], [p2].[ModifiedBy], [p2].[ModifiedOn], [p2].[Name], [p2].[Price], [p2].[SpecialOffer], [p0].[Id], [p0].[CreatedBy], [p0].[CreatedOn], [p0].[DeletedBy], [p0].[DeletedOn], [p0].[IsDeleted], [p0].[ModifiedBy], [p0].[ModifiedOn], [p0].[ProductId], [p0].[Size], [p1].[Id], [p1].[CreatedBy], [p1].[CreatedOn], [p1].[DeletedBy], [p1].[DeletedOn], [p1].[ImageData], [p1].[ImageMimeType], [p1].[IsDeleted], [p1].[IsMain], [p1].[ModifiedBy], [p1].[ModifiedOn], [p1].[ProductId]
FROM (
    SELECT TOP(2) [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer]
    FROM [Products] AS [p]
    WHERE [p].[Id] = @__dto_Id_0
) AS [p2]
LEFT JOIN [ProductSize] AS [p0] ON [p2].[Id] = [p0].[ProductId]
LEFT JOIN [ProductImage] AS [p1] ON [p2].[Id] = [p1].[ProductId]
ORDER BY [p2].[Id], [p0].[Id]
2025-10-04 15:09:16.502 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CurrentStock] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-10-04 15:09:16.505 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[ProductDTO, ShoeCartBackend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-04 15:09:16.507 +05:30 [INF] Executed action ProductsController.Update (ShoeCartBackend) in 30.5969ms
2025-10-04 15:09:16.508 +05:30 [INF] Executed endpoint 'ProductsController.Update (ShoeCartBackend)'
2025-10-04 15:09:16.510 +05:30 [INF] Request finished HTTP/2 PUT https://localhost:58476/api/Products - 200 null application/json; charset=utf-8 44.6167ms
2025-10-04 15:09:21.837 +05:30 [INF] Request starting HTTP/2 PUT https://localhost:58476/api/Products - multipart/form-data; boundary=----WebKitFormBoundaryq9jZjkLqg0lJprgn 906
2025-10-04 15:09:21.885 +05:30 [INF] Executing endpoint 'ProductsController.Update (ShoeCartBackend)'
2025-10-04 15:09:21.887 +05:30 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(UpdateProductDTO) on controller ProductsController (ShoeCartBackend).
2025-10-04 15:09:21.902 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__dto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p2].[Id], [p2].[Brand], [p2].[CategoryId], [p2].[CreatedBy], [p2].[CreatedOn], [p2].[CurrentStock], [p2].[DeletedBy], [p2].[DeletedOn], [p2].[Description], [p2].[InStock], [p2].[IsActive], [p2].[IsDeleted], [p2].[ModifiedBy], [p2].[ModifiedOn], [p2].[Name], [p2].[Price], [p2].[SpecialOffer], [p0].[Id], [p0].[CreatedBy], [p0].[CreatedOn], [p0].[DeletedBy], [p0].[DeletedOn], [p0].[IsDeleted], [p0].[ModifiedBy], [p0].[ModifiedOn], [p0].[ProductId], [p0].[Size], [p1].[Id], [p1].[CreatedBy], [p1].[CreatedOn], [p1].[DeletedBy], [p1].[DeletedOn], [p1].[ImageData], [p1].[ImageMimeType], [p1].[IsDeleted], [p1].[IsMain], [p1].[ModifiedBy], [p1].[ModifiedOn], [p1].[ProductId]
FROM (
    SELECT TOP(2) [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer]
    FROM [Products] AS [p]
    WHERE [p].[Id] = @__dto_Id_0
) AS [p2]
LEFT JOIN [ProductSize] AS [p0] ON [p2].[Id] = [p0].[ProductId]
LEFT JOIN [ProductImage] AS [p1] ON [p2].[Id] = [p1].[ProductId]
ORDER BY [p2].[Id], [p0].[Id]
2025-10-04 15:09:21.915 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CurrentStock] = @p0, [IsActive] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-10-04 15:09:21.919 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[ProductDTO, ShoeCartBackend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-04 15:09:21.921 +05:30 [INF] Executed action ProductsController.Update (ShoeCartBackend) in 31.9467ms
2025-10-04 15:09:21.923 +05:30 [INF] Executed endpoint 'ProductsController.Update (ShoeCartBackend)'
2025-10-04 15:09:21.925 +05:30 [INF] Request finished HTTP/2 PUT https://localhost:58476/api/Products - 200 null application/json; charset=utf-8 88.0445ms
2025-10-04 15:09:26.345 +05:30 [INF] Request starting HTTP/2 PUT https://localhost:58476/api/Products - multipart/form-data; boundary=----WebKitFormBoundaryNmF7ZBn3TIlB6EVX 906
2025-10-04 15:09:26.349 +05:30 [INF] Executing endpoint 'ProductsController.Update (ShoeCartBackend)'
2025-10-04 15:09:26.350 +05:30 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(UpdateProductDTO) on controller ProductsController (ShoeCartBackend).
2025-10-04 15:09:32.910 +05:30 [INF] Executed DbCommand (6,556ms) [Parameters=[@__dto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p2].[Id], [p2].[Brand], [p2].[CategoryId], [p2].[CreatedBy], [p2].[CreatedOn], [p2].[CurrentStock], [p2].[DeletedBy], [p2].[DeletedOn], [p2].[Description], [p2].[InStock], [p2].[IsActive], [p2].[IsDeleted], [p2].[ModifiedBy], [p2].[ModifiedOn], [p2].[Name], [p2].[Price], [p2].[SpecialOffer], [p0].[Id], [p0].[CreatedBy], [p0].[CreatedOn], [p0].[DeletedBy], [p0].[DeletedOn], [p0].[IsDeleted], [p0].[ModifiedBy], [p0].[ModifiedOn], [p0].[ProductId], [p0].[Size], [p1].[Id], [p1].[CreatedBy], [p1].[CreatedOn], [p1].[DeletedBy], [p1].[DeletedOn], [p1].[ImageData], [p1].[ImageMimeType], [p1].[IsDeleted], [p1].[IsMain], [p1].[ModifiedBy], [p1].[ModifiedOn], [p1].[ProductId]
FROM (
    SELECT TOP(2) [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer]
    FROM [Products] AS [p]
    WHERE [p].[Id] = @__dto_Id_0
) AS [p2]
LEFT JOIN [ProductSize] AS [p0] ON [p2].[Id] = [p0].[ProductId]
LEFT JOIN [ProductImage] AS [p1] ON [p2].[Id] = [p1].[ProductId]
ORDER BY [p2].[Id], [p0].[Id]
2025-10-04 15:09:32.943 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CurrentStock] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-10-04 15:09:32.948 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[ProductDTO, ShoeCartBackend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-04 15:09:32.951 +05:30 [INF] Executed action ProductsController.Update (ShoeCartBackend) in 6599.2508ms
2025-10-04 15:09:32.955 +05:30 [INF] Executed endpoint 'ProductsController.Update (ShoeCartBackend)'
2025-10-04 15:09:32.958 +05:30 [INF] Request finished HTTP/2 PUT https://localhost:58476/api/Products - 200 null application/json; charset=utf-8 6613.2999ms
2025-10-04 15:09:34.934 +05:30 [INF] Request starting HTTP/2 PUT https://localhost:58476/api/Products - multipart/form-data; boundary=----WebKitFormBoundaryLDbAjykHw89XR8L4 906
2025-10-04 15:09:34.939 +05:30 [INF] Executing endpoint 'ProductsController.Update (ShoeCartBackend)'
2025-10-04 15:09:34.941 +05:30 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(UpdateProductDTO) on controller ProductsController (ShoeCartBackend).
2025-10-04 15:09:34.950 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p2].[Id], [p2].[Brand], [p2].[CategoryId], [p2].[CreatedBy], [p2].[CreatedOn], [p2].[CurrentStock], [p2].[DeletedBy], [p2].[DeletedOn], [p2].[Description], [p2].[InStock], [p2].[IsActive], [p2].[IsDeleted], [p2].[ModifiedBy], [p2].[ModifiedOn], [p2].[Name], [p2].[Price], [p2].[SpecialOffer], [p0].[Id], [p0].[CreatedBy], [p0].[CreatedOn], [p0].[DeletedBy], [p0].[DeletedOn], [p0].[IsDeleted], [p0].[ModifiedBy], [p0].[ModifiedOn], [p0].[ProductId], [p0].[Size], [p1].[Id], [p1].[CreatedBy], [p1].[CreatedOn], [p1].[DeletedBy], [p1].[DeletedOn], [p1].[ImageData], [p1].[ImageMimeType], [p1].[IsDeleted], [p1].[IsMain], [p1].[ModifiedBy], [p1].[ModifiedOn], [p1].[ProductId]
FROM (
    SELECT TOP(2) [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer]
    FROM [Products] AS [p]
    WHERE [p].[Id] = @__dto_Id_0
) AS [p2]
LEFT JOIN [ProductSize] AS [p0] ON [p2].[Id] = [p0].[ProductId]
LEFT JOIN [ProductImage] AS [p1] ON [p2].[Id] = [p1].[ProductId]
ORDER BY [p2].[Id], [p0].[Id]
2025-10-04 15:09:34.958 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CurrentStock] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-10-04 15:09:34.963 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[ProductDTO, ShoeCartBackend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-04 15:09:34.964 +05:30 [INF] Executed action ProductsController.Update (ShoeCartBackend) in 21.5632ms
2025-10-04 15:09:34.966 +05:30 [INF] Executed endpoint 'ProductsController.Update (ShoeCartBackend)'
2025-10-04 15:09:34.967 +05:30 [INF] Request finished HTTP/2 PUT https://localhost:58476/api/Products - 200 null application/json; charset=utf-8 33.7106ms
2025-10-04 15:09:46.779 +05:30 [INF] Request starting HTTP/2 PUT https://localhost:58476/api/Products - multipart/form-data; boundary=----WebKitFormBoundary3kjug8CWIngE0ykU 906
2025-10-04 15:09:46.784 +05:30 [INF] Executing endpoint 'ProductsController.Update (ShoeCartBackend)'
2025-10-04 15:09:46.786 +05:30 [INF] Route matched with {action = "Update", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(UpdateProductDTO) on controller ProductsController (ShoeCartBackend).
2025-10-04 15:09:46.793 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p2].[Id], [p2].[Brand], [p2].[CategoryId], [p2].[CreatedBy], [p2].[CreatedOn], [p2].[CurrentStock], [p2].[DeletedBy], [p2].[DeletedOn], [p2].[Description], [p2].[InStock], [p2].[IsActive], [p2].[IsDeleted], [p2].[ModifiedBy], [p2].[ModifiedOn], [p2].[Name], [p2].[Price], [p2].[SpecialOffer], [p0].[Id], [p0].[CreatedBy], [p0].[CreatedOn], [p0].[DeletedBy], [p0].[DeletedOn], [p0].[IsDeleted], [p0].[ModifiedBy], [p0].[ModifiedOn], [p0].[ProductId], [p0].[Size], [p1].[Id], [p1].[CreatedBy], [p1].[CreatedOn], [p1].[DeletedBy], [p1].[DeletedOn], [p1].[ImageData], [p1].[ImageMimeType], [p1].[IsDeleted], [p1].[IsMain], [p1].[ModifiedBy], [p1].[ModifiedOn], [p1].[ProductId]
FROM (
    SELECT TOP(2) [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer]
    FROM [Products] AS [p]
    WHERE [p].[Id] = @__dto_Id_0
) AS [p2]
LEFT JOIN [ProductSize] AS [p0] ON [p2].[Id] = [p0].[ProductId]
LEFT JOIN [ProductImage] AS [p1] ON [p2].[Id] = [p1].[ProductId]
ORDER BY [p2].[Id], [p0].[Id]
2025-10-04 15:09:46.803 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CurrentStock] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-10-04 15:09:46.805 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[ProductDTO, ShoeCartBackend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-04 15:09:46.808 +05:30 [INF] Executed action ProductsController.Update (ShoeCartBackend) in 19.5205ms
2025-10-04 15:09:46.810 +05:30 [INF] Executed endpoint 'ProductsController.Update (ShoeCartBackend)'
2025-10-04 15:09:46.811 +05:30 [INF] Request finished HTTP/2 PUT https://localhost:58476/api/Products - 200 null application/json; charset=utf-8 32.6253ms
2025-10-04 15:10:08.713 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 168
2025-10-04 15:10:08.719 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend)'
2025-10-04 15:10:08.721 +05:30 [INF] Route matched with {action = "Checkout", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 15:10:08.747 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CartId], [c].[ImageData], [c].[ImageMimeType], [c].[Name], [c].[Price], [c].[ProductId], [c].[Quantity], [c].[Size], [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c0].[Id], [c0].[IsDeleted], [c0].[UserId]
FROM [CartItems] AS [c]
INNER JOIN [Carts] AS [c0] ON [c].[CartId] = [c0].[Id]
INNER JOIN [Products] AS [p] ON [c].[ProductId] = [p].[Id]
WHERE [c0].[UserId] = @__userId_0
2025-10-04 15:10:09.060 +05:30 [INF] Executed DbCommand (131ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p1;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p2;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p3;
INSERT INTO [Orders] ([BillingCity], [BillingCountry], [BillingState], [BillingStreet], [BillingZip], [CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [IsDeleted], [ModifiedBy], [ModifiedOn], [OrderStatus], [PaymentMethod], [PaymentStatus], [TotalAmount], [UserId], [UserId1])
OUTPUT INSERTED.[Id]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-10-04 15:10:09.110 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'ShoeCartBackend.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Users_UserId1". The conflict occurred in database "ShoecartDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:2b77f59d-bcfb-4a9e-9c83-bfea4360c7cb
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Users_UserId1". The conflict occurred in database "ShoecartDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:2b77f59d-bcfb-4a9e-9c83-bfea4360c7cb
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-04 15:10:09.314 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend) in 590.2351ms
2025-10-04 15:10:09.318 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend)'
2025-10-04 15:10:09.325 +05:30 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Users_UserId1". The conflict occurred in database "ShoecartDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:2b77f59d-bcfb-4a9e-9c83-bfea4360c7cb
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ShoeCartBackend.Services.OrderService.CreateOrderAsync(Int32 userId, CreateOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Services\Implementations\OrderService.cs:line 72
   at ShoeCartBackend.Controllers.OrdersController.Checkout(CreateOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Controllers\OrderController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-04 15:10:09.359 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 500 null text/plain; charset=utf-8 646.4894ms
2025-10-04 15:14:57.820 +05:30 [INF] User profile is available. Using 'C:\Users\rinsh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-04 15:14:58.215 +05:30 [INF] Now listening on: http://localhost:58477
2025-10-04 15:14:58.217 +05:30 [INF] Now listening on: https://localhost:58476
2025-10-04 15:14:58.516 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-04 15:14:58.518 +05:30 [INF] Hosting environment: Development
2025-10-04 15:14:58.519 +05:30 [INF] Content root path: C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend
2025-10-04 15:14:59.359 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:58477/ - null null
2025-10-04 15:14:59.832 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:58477/ - 307 0 null 491.954ms
2025-10-04 15:14:59.982 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/ - null null
2025-10-04 15:15:00.129 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/ - 404 0 null 147.7146ms
2025-10-04 15:15:00.135 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:58476/, Response status code: 404
2025-10-04 15:15:03.764 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 15:15:03.870 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 106.2671ms
2025-10-04 15:15:03.907 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 15:15:03.948 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 15:15:03.968 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 61.7592ms
2025-10-04 15:15:04.045 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 97.4514ms
2025-10-04 15:15:04.152 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 15:15:04.183 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 30.4542ms
2025-10-04 15:16:57.469 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Auth/login - multipart/form-data; boundary=----WebKitFormBoundarytKCvdtla2zF6ZJr3 269
2025-10-04 15:16:57.618 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend)'
2025-10-04 15:16:57.726 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ShoeCartBackend.DTOs.AuthDTO.LoginRequestDto) on controller ShoeCartBackend.Controllers.AuthController (ShoeCartBackend).
2025-10-04 15:16:58.796 +05:30 [WRN] The foreign key property 'Order.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-04 15:16:58.838 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 15:16:58.841 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 15:17:00.227 +05:30 [INF] Executed DbCommand (176ms) [Parameters=[@__loginRequestDto_Email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedBy], [u].[CreatedOn], [u].[DeletedBy], [u].[DeletedOn], [u].[Email], [u].[IsBlocked], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedOn], [u].[Name], [u].[PasswordHash], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginRequestDto_Email_0
2025-10-04 15:17:00.785 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 15:17:00.812 +05:30 [INF] Executed action ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend) in 3079.8091ms
2025-10-04 15:17:00.813 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend)'
2025-10-04 15:17:00.822 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Auth/login - 200 null application/json; charset=utf-8 3357.8309ms
2025-10-04 15:17:29.227 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 185
2025-10-04 15:17:29.323 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend)'
2025-10-04 15:17:29.332 +05:30 [INF] Route matched with {action = "Checkout", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 15:17:29.372 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-04 15:17:29.396 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend) in 60.6197ms
2025-10-04 15:17:29.399 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend)'
2025-10-04 15:17:29.400 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 400 null application/problem+json; charset=utf-8 173.8973ms
2025-10-04 15:17:38.304 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 178
2025-10-04 15:17:38.334 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend)'
2025-10-04 15:17:38.337 +05:30 [INF] Route matched with {action = "Checkout", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 15:17:38.345 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-04 15:17:38.348 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend) in 6.5351ms
2025-10-04 15:17:38.350 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend)'
2025-10-04 15:17:38.351 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 400 null application/problem+json; charset=utf-8 47.187ms
2025-10-04 15:17:58.029 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 178
2025-10-04 15:17:58.059 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend)'
2025-10-04 15:17:58.062 +05:30 [INF] Route matched with {action = "Checkout", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 15:17:58.066 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-04 15:17:58.068 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend) in 4.3192ms
2025-10-04 15:17:58.070 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.Checkout (ShoeCartBackend)'
2025-10-04 15:17:58.072 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 400 null application/problem+json; charset=utf-8 43.2517ms
2025-10-04 15:21:34.595 +05:30 [INF] User profile is available. Using 'C:\Users\rinsh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-04 15:21:35.040 +05:30 [INF] Now listening on: http://localhost:58477
2025-10-04 15:21:35.042 +05:30 [INF] Now listening on: https://localhost:58476
2025-10-04 15:21:35.400 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-04 15:21:35.436 +05:30 [INF] Hosting environment: Development
2025-10-04 15:21:35.438 +05:30 [INF] Content root path: C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend
2025-10-04 15:21:36.201 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:58477/ - null null
2025-10-04 15:21:36.530 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:58477/ - 307 0 null 341.7115ms
2025-10-04 15:21:36.716 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/ - null null
2025-10-04 15:21:36.847 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/ - 404 0 null 131.7446ms
2025-10-04 15:21:36.860 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:58476/, Response status code: 404
2025-10-04 15:21:39.806 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.htmls - null null
2025-10-04 15:21:39.866 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.htmls - 404 0 null 59.0504ms
2025-10-04 15:21:39.874 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:58476/swagger/index.htmls, Response status code: 404
2025-10-04 15:21:42.266 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 15:21:42.367 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 102.0419ms
2025-10-04 15:21:42.417 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 15:21:42.424 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 15:21:42.439 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 21.5102ms
2025-10-04 15:21:42.506 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 81.8761ms
2025-10-04 15:21:42.704 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 15:21:42.744 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 40.0699ms
2025-10-04 15:22:13.158 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 181
2025-10-04 15:22:13.197 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenException: IDX10612: Decryption failed. Header.Enc is null or empty, it must be specified.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.DecryptToken(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWEAsync(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-10-04 15:22:13.253 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10612: Decryption failed. Header.Enc is null or empty, it must be specified.
2025-10-04 15:22:13.260 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (user)
2025-10-04 15:22:13.267 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-04 15:22:13.269 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 401 0 null 111.0623ms
2025-10-04 15:22:30.148 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 181
2025-10-04 15:22:30.236 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (user)
2025-10-04 15:22:30.240 +05:30 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-04 15:22:30.242 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 403 0 null 94.0674ms
2025-10-04 15:23:05.387 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Auth/login - multipart/form-data; boundary=----WebKitFormBoundary5gbkGTKrPkbq9uyK 269
2025-10-04 15:23:05.395 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend)'
2025-10-04 15:23:05.442 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ShoeCartBackend.DTOs.AuthDTO.LoginRequestDto) on controller ShoeCartBackend.Controllers.AuthController (ShoeCartBackend).
2025-10-04 15:23:06.489 +05:30 [WRN] The foreign key property 'Order.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-10-04 15:23:06.518 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 15:23:06.520 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 15:23:07.621 +05:30 [INF] Executed DbCommand (149ms) [Parameters=[@__loginRequestDto_Email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedBy], [u].[CreatedOn], [u].[DeletedBy], [u].[DeletedOn], [u].[Email], [u].[IsBlocked], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedOn], [u].[Name], [u].[PasswordHash], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginRequestDto_Email_0
2025-10-04 15:23:08.096 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 15:23:08.118 +05:30 [INF] Executed action ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend) in 2669.6309ms
2025-10-04 15:23:08.120 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend)'
2025-10-04 15:23:08.129 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Auth/login - 200 null application/json; charset=utf-8 2743.6032ms
2025-10-04 15:23:23.421 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 181
2025-10-04 15:23:23.431 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 15:23:23.444 +05:30 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 15:23:23.685 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CartId], [c].[ImageData], [c].[ImageMimeType], [c].[Name], [c].[Price], [c].[ProductId], [c].[Quantity], [c].[Size], [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c0].[Id], [c0].[IsDeleted], [c0].[UserId]
FROM [CartItems] AS [c]
INNER JOIN [Carts] AS [c0] ON [c].[CartId] = [c0].[Id]
INNER JOIN [Products] AS [p] ON [c].[ProductId] = [p].[Id]
WHERE [c0].[UserId] = @__userId_0
2025-10-04 15:23:24.153 +05:30 [INF] Executed DbCommand (94ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p1;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p2;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p3;
INSERT INTO [Orders] ([BillingCity], [BillingCountry], [BillingState], [BillingStreet], [BillingZip], [CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [IsDeleted], [ModifiedBy], [ModifiedOn], [OrderStatus], [PaymentMethod], [PaymentStatus], [TotalAmount], [UserId], [UserId1])
OUTPUT INSERTED.[Id]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-10-04 15:23:24.192 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'ShoeCartBackend.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Users_UserId1". The conflict occurred in database "ShoecartDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:b8b0d780-d4d6-47aa-af76-646c0cb5734d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Users_UserId1". The conflict occurred in database "ShoecartDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:b8b0d780-d4d6-47aa-af76-646c0cb5734d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-04 15:23:24.365 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend) in 918.1379ms
2025-10-04 15:23:24.369 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 15:23:24.374 +05:30 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Users_UserId1". The conflict occurred in database "ShoecartDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:b8b0d780-d4d6-47aa-af76-646c0cb5734d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ShoeCartBackend.Services.OrderService.CreateOrderAsync(Int32 userId, CreateOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Services\Implementations\OrderService.cs:line 73
   at ShoeCartBackend.Controllers.OrdersController.CreateOrder(CreateOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Controllers\OrderController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-04 15:23:24.438 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 500 null text/plain; charset=utf-8 1017.9007ms
2025-10-04 15:30:14.347 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 15:30:14.381 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 15:30:27.442 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 15:30:27.472 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 15:30:29.255 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-04 15:30:29.265 +05:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-04 15:31:04.292 +05:30 [ERR] Failed executing DbCommand (35,024ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-04 15:31:04.481 +05:30 [ERR] Failed executing DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-04 15:31:11.235 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 15:31:11.263 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 15:31:14.358 +05:30 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-04 15:31:14.367 +05:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-04 15:31:39.635 +05:30 [INF] Executed DbCommand (25,266ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-04 15:31:50.040 +05:30 [INF] Executed DbCommand (10,333ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-04 15:31:50.047 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-04 15:31:50.049 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-04 15:32:15.059 +05:30 [INF] Executed DbCommand (25,009ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-04 15:32:15.070 +05:30 [INF] Applying migration '20251004100015_FixOrderUserFK'.
2025-10-04 15:32:17.954 +05:30 [INF] Executed DbCommand (2,860ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Orders] DROP CONSTRAINT [FK_Orders_Users_UserId1];
2025-10-04 15:32:27.177 +05:30 [INF] Executed DbCommand (9,223ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Orders_UserId1] ON [Orders];
2025-10-04 15:32:48.702 +05:30 [INF] Executed DbCommand (21,524ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Orders]') AND [c].[name] = N'UserId1');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [Orders] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [Orders] DROP COLUMN [UserId1];
2025-10-04 15:32:49.399 +05:30 [INF] Executed DbCommand (697ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251004100015_FixOrderUserFK', N'9.0.9');
2025-10-04 15:32:49.411 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-04 15:33:00.968 +05:30 [INF] User profile is available. Using 'C:\Users\rinsh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-04 15:33:01.472 +05:30 [INF] Now listening on: http://localhost:58477
2025-10-04 15:33:01.474 +05:30 [INF] Now listening on: https://localhost:58476
2025-10-04 15:33:02.019 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-04 15:33:02.022 +05:30 [INF] Hosting environment: Development
2025-10-04 15:33:02.024 +05:30 [INF] Content root path: C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend
2025-10-04 15:33:02.866 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:58477/ - null null
2025-10-04 15:33:03.440 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:58477/ - 307 0 null 587.7299ms
2025-10-04 15:33:03.819 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/ - null null
2025-10-04 15:33:04.074 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/ - 404 0 null 255.4894ms
2025-10-04 15:33:04.185 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:58476/, Response status code: 404
2025-10-04 15:33:06.608 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 15:33:07.188 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 579.5996ms
2025-10-04 15:33:07.203 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 15:33:07.257 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 15:33:07.266 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 64.8803ms
2025-10-04 15:33:07.663 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 406.2225ms
2025-10-04 15:33:07.762 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 15:33:07.810 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 47.9591ms
2025-10-04 15:33:41.600 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/api/Cart - null null
2025-10-04 15:33:41.742 +05:30 [INF] Executing endpoint 'CartController.Get (ShoeCartBackend)'
2025-10-04 15:33:41.777 +05:30 [INF] Route matched with {action = "Get", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller CartController (ShoeCartBackend).
2025-10-04 15:33:42.621 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 15:33:42.625 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 15:33:47.184 +05:30 [INF] Executed DbCommand (78ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[IsDeleted], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[ImageData], [c0].[ImageMimeType], [c0].[Name], [c0].[Price], [c0].[ProductId], [c0].[Quantity], [c0].[Size]
FROM (
    SELECT TOP(1) [c].[Id], [c].[IsDeleted], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
2025-10-04 15:33:47.300 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 15:33:47.326 +05:30 [INF] Executed action CartController.Get (ShoeCartBackend) in 5542.2698ms
2025-10-04 15:33:47.329 +05:30 [INF] Executed endpoint 'CartController.Get (ShoeCartBackend)'
2025-10-04 15:33:47.338 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/api/Cart - 200 null application/json; charset=utf-8 5737.9482ms
2025-10-04 15:34:08.843 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 181
2025-10-04 15:34:08.853 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 15:34:08.866 +05:30 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 15:34:09.039 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CartId], [c].[ImageData], [c].[ImageMimeType], [c].[Name], [c].[Price], [c].[ProductId], [c].[Quantity], [c].[Size], [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c0].[Id], [c0].[IsDeleted], [c0].[UserId]
FROM [CartItems] AS [c]
INNER JOIN [Carts] AS [c0] ON [c].[CartId] = [c0].[Id]
INNER JOIN [Products] AS [p] ON [c].[ProductId] = [p].[Id]
WHERE [c0].[UserId] = @__userId_0
2025-10-04 15:34:09.509 +05:30 [INF] Executed DbCommand (173ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p1;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p2;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p3;
INSERT INTO [Orders] ([BillingCity], [BillingCountry], [BillingState], [BillingStreet], [BillingZip], [CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [IsDeleted], [ModifiedBy], [ModifiedOn], [OrderStatus], [PaymentMethod], [PaymentStatus], [TotalAmount], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
2025-10-04 15:34:09.691 +05:30 [INF] Executed DbCommand (135ms) [Parameters=[@p21='?' (Size = 4000), @p22='?' (DbType = DateTime2), @p23='?' (Size = 4000), @p24='?' (DbType = DateTime2), @p25='?' (Size = 8000) (DbType = Binary), @p26='?' (Size = 4000), @p27='?' (DbType = Boolean), @p28='?' (Size = 4000), @p29='?' (DbType = DateTime2), @p30='?' (Size = 4000), @p31='?' (DbType = Int32), @p32='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (Size = 4000), @p36='?' (Size = 4000), @p37='?' (DbType = DateTime2), @p38='?' (Size = 4000), @p39='?' (DbType = DateTime2), @p40='?' (Size = 8000) (DbType = Binary), @p41='?' (Size = 4000), @p42='?' (DbType = Boolean), @p43='?' (Size = 4000), @p44='?' (DbType = DateTime2), @p45='?' (Size = 4000), @p46='?' (DbType = Int32), @p47='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p48='?' (DbType = Int32), @p49='?' (DbType = Int32), @p50='?' (Size = 4000), @p51='?' (Size = 4000), @p52='?' (DbType = DateTime2), @p53='?' (Size = 4000), @p54='?' (DbType = DateTime2), @p55='?' (Size = 8000) (DbType = Binary), @p56='?' (Size = 4000), @p57='?' (DbType = Boolean), @p58='?' (Size = 4000), @p59='?' (DbType = DateTime2), @p60='?' (Size = 4000), @p61='?' (DbType = Int32), @p62='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p63='?' (DbType = Int32), @p64='?' (DbType = Int32), @p65='?' (Size = 4000), @p66='?' (Size = 4000), @p67='?' (DbType = DateTime2), @p68='?' (Size = 4000), @p69='?' (DbType = DateTime2), @p70='?' (Size = 8000) (DbType = Binary), @p71='?' (Size = 4000), @p72='?' (DbType = Boolean), @p73='?' (Size = 4000), @p74='?' (DbType = DateTime2), @p75='?' (Size = 4000), @p76='?' (DbType = Int32), @p77='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p78='?' (DbType = Int32), @p79='?' (DbType = Int32), @p80='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 0),
(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, 1),
(@p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, 2),
(@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, 3)) AS i ([CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [ImageData], [ImageMimeType], [IsDeleted], [ModifiedBy], [ModifiedOn], [Name], [OrderId], [Price], [ProductId], [Quantity], [Size], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [ImageData], [ImageMimeType], [IsDeleted], [ModifiedBy], [ModifiedOn], [Name], [OrderId], [Price], [ProductId], [Quantity], [Size])
VALUES (i.[CreatedBy], i.[CreatedOn], i.[DeletedBy], i.[DeletedOn], i.[ImageData], i.[ImageMimeType], i.[IsDeleted], i.[ModifiedBy], i.[ModifiedOn], i.[Name], i.[OrderId], i.[Price], i.[ProductId], i.[Quantity], i.[Size])
OUTPUT INSERTED.[Id], i._Position;
2025-10-04 15:34:09.761 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'ShoeCartBackend.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Size', table 'ShoecartDB.dbo.OrderItems'; column does not allow nulls. UPDATE fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:5282d6dd-19ad-4c27-9851-5d6a5604ca70
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Size', table 'ShoecartDB.dbo.OrderItems'; column does not allow nulls. UPDATE fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:5282d6dd-19ad-4c27-9851-5d6a5604ca70
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-04 15:34:09.921 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend) in 1053.763ms
2025-10-04 15:34:09.924 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 15:34:09.931 +05:30 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Size', table 'ShoecartDB.dbo.OrderItems'; column does not allow nulls. UPDATE fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:5282d6dd-19ad-4c27-9851-5d6a5604ca70
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ShoeCartBackend.Services.OrderService.CreateOrderAsync(Int32 userId, CreateOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Services\Implementations\OrderService.cs:line 73
   at ShoeCartBackend.Controllers.OrdersController.CreateOrder(CreateOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Controllers\OrderController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-04 15:34:09.997 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 500 null text/plain; charset=utf-8 1154.071ms
2025-10-04 15:38:45.284 +05:30 [INF] User profile is available. Using 'C:\Users\rinsh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-04 15:38:45.659 +05:30 [INF] Now listening on: http://localhost:58477
2025-10-04 15:38:45.662 +05:30 [INF] Now listening on: https://localhost:58476
2025-10-04 15:38:46.400 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-04 15:38:46.404 +05:30 [INF] Hosting environment: Development
2025-10-04 15:38:46.411 +05:30 [INF] Content root path: C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend
2025-10-04 15:38:47.147 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:58477/ - null null
2025-10-04 15:38:47.627 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:58477/ - 307 0 null 529.0481ms
2025-10-04 15:38:47.774 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/ - null null
2025-10-04 15:38:47.884 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/ - 404 0 null 109.8794ms
2025-10-04 15:38:47.892 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:58476/, Response status code: 404
2025-10-04 15:38:50.767 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 15:38:50.933 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 166.1655ms
2025-10-04 15:38:51.101 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 15:38:51.102 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 15:38:51.113 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 11.5211ms
2025-10-04 15:38:51.160 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 57.8369ms
2025-10-04 15:38:51.261 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 15:38:51.307 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 46.3163ms
2025-10-04 15:39:17.610 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 181
2025-10-04 15:39:17.743 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 15:39:17.787 +05:30 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 15:39:18.709 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 15:39:18.712 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 15:39:20.099 +05:30 [INF] Executed DbCommand (174ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CartId], [c].[ImageData], [c].[ImageMimeType], [c].[Name], [c].[Price], [c].[ProductId], [c].[Quantity], [c].[Size], [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c0].[Id], [c0].[IsDeleted], [c0].[UserId]
FROM [CartItems] AS [c]
INNER JOIN [Carts] AS [c0] ON [c].[CartId] = [c0].[Id]
INNER JOIN [Products] AS [p] ON [c].[ProductId] = [p].[Id]
WHERE [c0].[UserId] = @__userId_0
2025-10-04 15:39:20.505 +05:30 [INF] Executed DbCommand (47ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p1;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p2;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p3;
INSERT INTO [Orders] ([BillingCity], [BillingCountry], [BillingState], [BillingStreet], [BillingZip], [CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [IsDeleted], [ModifiedBy], [ModifiedOn], [OrderStatus], [PaymentMethod], [PaymentStatus], [TotalAmount], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
2025-10-04 15:39:20.596 +05:30 [INF] Executed DbCommand (64ms) [Parameters=[@p21='?' (Size = 4000), @p22='?' (DbType = DateTime2), @p23='?' (Size = 4000), @p24='?' (DbType = DateTime2), @p25='?' (Size = 8000) (DbType = Binary), @p26='?' (Size = 4000), @p27='?' (DbType = Boolean), @p28='?' (Size = 4000), @p29='?' (DbType = DateTime2), @p30='?' (Size = 4000), @p31='?' (DbType = Int32), @p32='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (Size = 4000), @p36='?' (Size = 4000), @p37='?' (DbType = DateTime2), @p38='?' (Size = 4000), @p39='?' (DbType = DateTime2), @p40='?' (Size = 8000) (DbType = Binary), @p41='?' (Size = 4000), @p42='?' (DbType = Boolean), @p43='?' (Size = 4000), @p44='?' (DbType = DateTime2), @p45='?' (Size = 4000), @p46='?' (DbType = Int32), @p47='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p48='?' (DbType = Int32), @p49='?' (DbType = Int32), @p50='?' (Size = 4000), @p51='?' (Size = 4000), @p52='?' (DbType = DateTime2), @p53='?' (Size = 4000), @p54='?' (DbType = DateTime2), @p55='?' (Size = 8000) (DbType = Binary), @p56='?' (Size = 4000), @p57='?' (DbType = Boolean), @p58='?' (Size = 4000), @p59='?' (DbType = DateTime2), @p60='?' (Size = 4000), @p61='?' (DbType = Int32), @p62='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p63='?' (DbType = Int32), @p64='?' (DbType = Int32), @p65='?' (Size = 4000), @p66='?' (Size = 4000), @p67='?' (DbType = DateTime2), @p68='?' (Size = 4000), @p69='?' (DbType = DateTime2), @p70='?' (Size = 8000) (DbType = Binary), @p71='?' (Size = 4000), @p72='?' (DbType = Boolean), @p73='?' (Size = 4000), @p74='?' (DbType = DateTime2), @p75='?' (Size = 4000), @p76='?' (DbType = Int32), @p77='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p78='?' (DbType = Int32), @p79='?' (DbType = Int32), @p80='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 0),
(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, 1),
(@p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, 2),
(@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, 3)) AS i ([CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [ImageData], [ImageMimeType], [IsDeleted], [ModifiedBy], [ModifiedOn], [Name], [OrderId], [Price], [ProductId], [Quantity], [Size], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [ImageData], [ImageMimeType], [IsDeleted], [ModifiedBy], [ModifiedOn], [Name], [OrderId], [Price], [ProductId], [Quantity], [Size])
VALUES (i.[CreatedBy], i.[CreatedOn], i.[DeletedBy], i.[DeletedOn], i.[ImageData], i.[ImageMimeType], i.[IsDeleted], i.[ModifiedBy], i.[ModifiedOn], i.[Name], i.[OrderId], i.[Price], i.[ProductId], i.[Quantity], i.[Size])
OUTPUT INSERTED.[Id], i._Position;
2025-10-04 15:39:20.653 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'ShoeCartBackend.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Name', table 'ShoecartDB.dbo.OrderItems'; column does not allow nulls. UPDATE fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ad2ac607-3e4e-4041-b5e4-0f49dfe2b6e5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Name', table 'ShoecartDB.dbo.OrderItems'; column does not allow nulls. UPDATE fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ad2ac607-3e4e-4041-b5e4-0f49dfe2b6e5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-04 15:39:20.795 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend) in 3001.4083ms
2025-10-04 15:39:20.798 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 15:39:20.804 +05:30 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Name', table 'ShoecartDB.dbo.OrderItems'; column does not allow nulls. UPDATE fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ad2ac607-3e4e-4041-b5e4-0f49dfe2b6e5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ShoeCartBackend.Services.OrderService.CreateOrderAsync(Int32 userId, CreateOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Services\Implementations\OrderService.cs:line 75
   at ShoeCartBackend.Controllers.OrdersController.CreateOrder(CreateOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Controllers\OrderController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-04 15:39:20.853 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 500 null text/plain; charset=utf-8 3243.5179ms
2025-10-04 15:41:49.796 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 15:41:49.848 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 55.2558ms
2025-10-04 15:41:50.031 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 15:41:50.031 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 15:41:50.043 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 22.6676ms
2025-10-04 15:41:50.061 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.0512ms
2025-10-04 15:41:50.313 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 15:41:50.367 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 54.855ms
2025-10-04 15:42:05.453 +05:30 [INF] User profile is available. Using 'C:\Users\rinsh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-04 15:42:05.832 +05:30 [INF] Now listening on: http://localhost:58477
2025-10-04 15:42:05.834 +05:30 [INF] Now listening on: https://localhost:58476
2025-10-04 15:42:06.774 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-04 15:42:06.776 +05:30 [INF] Hosting environment: Development
2025-10-04 15:42:06.777 +05:30 [INF] Content root path: C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend
2025-10-04 15:42:07.485 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:58477/ - null null
2025-10-04 15:42:07.836 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:58477/ - 307 0 null 373.7457ms
2025-10-04 15:42:08.013 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/ - null null
2025-10-04 15:42:08.225 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/ - 404 0 null 212.4775ms
2025-10-04 15:42:08.235 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:58476/, Response status code: 404
2025-10-04 15:42:10.239 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 15:42:10.404 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 165.5164ms
2025-10-04 15:42:10.468 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 15:42:10.468 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 15:42:10.490 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 21.9975ms
2025-10-04 15:42:10.532 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 63.8902ms
2025-10-04 15:42:10.618 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 15:42:10.656 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 37.7873ms
2025-10-04 15:42:26.591 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/api/Cart - null null
2025-10-04 15:42:26.702 +05:30 [INF] Executing endpoint 'CartController.Get (ShoeCartBackend)'
2025-10-04 15:42:26.736 +05:30 [INF] Route matched with {action = "Get", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller CartController (ShoeCartBackend).
2025-10-04 15:42:27.768 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 15:42:27.772 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 15:42:42.916 +05:30 [ERR] An error occurred using the connection to database 'ShoecartDb' on server 'RINSHAD\SQLEXPRESS'.
2025-10-04 15:42:42.958 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'ShoeCartBackend.Data.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=74; handshake=27; [Login] initialization=3; authentication=12; [Post-Login] complete=14018; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:4d2d0169-1091-496a-b0ee-a5a30a7f438d
Error Number:-2,State:0,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=74; handshake=27; [Login] initialization=3; authentication=12; [Post-Login] complete=14018; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:4d2d0169-1091-496a-b0ee-a5a30a7f438d
Error Number:-2,State:0,Class:11
2025-10-04 15:42:43.077 +05:30 [INF] Executed action CartController.Get (ShoeCartBackend) in 16336.0196ms
2025-10-04 15:42:43.080 +05:30 [INF] Executed endpoint 'CartController.Get (ShoeCartBackend)'
2025-10-04 15:42:43.086 +05:30 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=74; handshake=27; [Login] initialization=3; authentication=12; [Post-Login] complete=14018; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CartService.GetCartForUserAsync(Int32 userId) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Services\Implementations\CartService.cs:line 59
   at CartController.Get() in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Controllers\CartController.cs:line 50
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:4d2d0169-1091-496a-b0ee-a5a30a7f438d
Error Number:-2,State:0,Class:11
2025-10-04 15:42:43.140 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/api/Cart - 500 null text/plain; charset=utf-8 16553.5984ms
2025-10-04 15:43:32.418 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Auth/login - multipart/form-data; boundary=----WebKitFormBoundary9AOjqmUzKRhOFqQb 269
2025-10-04 15:43:32.444 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenException: IDX10612: Decryption failed. Header.Enc is null or empty, it must be specified.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.DecryptToken(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWEAsync(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-10-04 15:43:32.448 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10612: Decryption failed. Header.Enc is null or empty, it must be specified.
2025-10-04 15:43:32.450 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend)'
2025-10-04 15:43:32.463 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ShoeCartBackend.DTOs.AuthDTO.LoginRequestDto) on controller ShoeCartBackend.Controllers.AuthController (ShoeCartBackend).
2025-10-04 15:43:32.777 +05:30 [INF] Executed DbCommand (92ms) [Parameters=[@__loginRequestDto_Email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreatedBy], [u].[CreatedOn], [u].[DeletedBy], [u].[DeletedOn], [u].[Email], [u].[IsBlocked], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedOn], [u].[Name], [u].[PasswordHash], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginRequestDto_Email_0
2025-10-04 15:43:33.228 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 15:43:33.260 +05:30 [INF] Executed action ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend) in 794.9539ms
2025-10-04 15:43:33.262 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.AuthController.Login (ShoeCartBackend)'
2025-10-04 15:43:33.265 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Auth/login - 200 null application/json; charset=utf-8 847.7315ms
2025-10-04 15:44:01.730 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/api/Cart - null null
2025-10-04 15:44:01.749 +05:30 [INF] Executing endpoint 'CartController.Get (ShoeCartBackend)'
2025-10-04 15:44:01.750 +05:30 [INF] Route matched with {action = "Get", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller CartController (ShoeCartBackend).
2025-10-04 15:44:01.809 +05:30 [INF] Executed DbCommand (35ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[IsDeleted], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[ImageData], [c0].[ImageMimeType], [c0].[Name], [c0].[Price], [c0].[ProductId], [c0].[Quantity], [c0].[Size]
FROM (
    SELECT TOP(1) [c].[Id], [c].[IsDeleted], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
2025-10-04 15:44:01.854 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 15:44:01.870 +05:30 [INF] Executed action CartController.Get (ShoeCartBackend) in 117.6305ms
2025-10-04 15:44:01.871 +05:30 [INF] Executed endpoint 'CartController.Get (ShoeCartBackend)'
2025-10-04 15:44:01.873 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/api/Cart - 200 null application/json; charset=utf-8 143.1135ms
2025-10-04 15:44:18.434 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 181
2025-10-04 15:44:18.442 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 15:44:18.474 +05:30 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 15:44:18.578 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CartId], [c].[ImageData], [c].[ImageMimeType], [c].[Name], [c].[Price], [c].[ProductId], [c].[Quantity], [c].[Size], [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c0].[Id], [c0].[IsDeleted], [c0].[UserId]
FROM [CartItems] AS [c]
INNER JOIN [Carts] AS [c0] ON [c].[CartId] = [c0].[Id]
INNER JOIN [Products] AS [p] ON [c].[ProductId] = [p].[Id]
WHERE [c0].[UserId] = @__userId_0
2025-10-04 15:44:18.875 +05:30 [INF] Executed DbCommand (40ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p1;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p2;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p3;
INSERT INTO [Orders] ([BillingCity], [BillingCountry], [BillingState], [BillingStreet], [BillingZip], [CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [IsDeleted], [ModifiedBy], [ModifiedOn], [OrderStatus], [PaymentMethod], [PaymentStatus], [TotalAmount], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
2025-10-04 15:44:18.954 +05:30 [INF] Executed DbCommand (45ms) [Parameters=[@p21='?' (Size = 4000), @p22='?' (DbType = DateTime2), @p23='?' (Size = 4000), @p24='?' (DbType = DateTime2), @p25='?' (Size = 8000) (DbType = Binary), @p26='?' (Size = 4000), @p27='?' (DbType = Boolean), @p28='?' (Size = 4000), @p29='?' (DbType = DateTime2), @p30='?' (Size = 4000), @p31='?' (DbType = Int32), @p32='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (Size = 4000), @p36='?' (Size = 4000), @p37='?' (DbType = DateTime2), @p38='?' (Size = 4000), @p39='?' (DbType = DateTime2), @p40='?' (Size = 8000) (DbType = Binary), @p41='?' (Size = 4000), @p42='?' (DbType = Boolean), @p43='?' (Size = 4000), @p44='?' (DbType = DateTime2), @p45='?' (Size = 4000), @p46='?' (DbType = Int32), @p47='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p48='?' (DbType = Int32), @p49='?' (DbType = Int32), @p50='?' (Size = 4000), @p51='?' (Size = 4000), @p52='?' (DbType = DateTime2), @p53='?' (Size = 4000), @p54='?' (DbType = DateTime2), @p55='?' (Size = 8000) (DbType = Binary), @p56='?' (Size = 4000), @p57='?' (DbType = Boolean), @p58='?' (Size = 4000), @p59='?' (DbType = DateTime2), @p60='?' (Size = 4000), @p61='?' (DbType = Int32), @p62='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p63='?' (DbType = Int32), @p64='?' (DbType = Int32), @p65='?' (Size = 4000), @p66='?' (Size = 4000), @p67='?' (DbType = DateTime2), @p68='?' (Size = 4000), @p69='?' (DbType = DateTime2), @p70='?' (Size = 8000) (DbType = Binary), @p71='?' (Size = 4000), @p72='?' (DbType = Boolean), @p73='?' (Size = 4000), @p74='?' (DbType = DateTime2), @p75='?' (Size = 4000), @p76='?' (DbType = Int32), @p77='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p78='?' (DbType = Int32), @p79='?' (DbType = Int32), @p80='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 0),
(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, 1),
(@p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, 2),
(@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, 3)) AS i ([CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [ImageData], [ImageMimeType], [IsDeleted], [ModifiedBy], [ModifiedOn], [Name], [OrderId], [Price], [ProductId], [Quantity], [Size], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [ImageData], [ImageMimeType], [IsDeleted], [ModifiedBy], [ModifiedOn], [Name], [OrderId], [Price], [ProductId], [Quantity], [Size])
VALUES (i.[CreatedBy], i.[CreatedOn], i.[DeletedBy], i.[DeletedOn], i.[ImageData], i.[ImageMimeType], i.[IsDeleted], i.[ModifiedBy], i.[ModifiedOn], i.[Name], i.[OrderId], i.[Price], i.[ProductId], i.[Quantity], i.[Size])
OUTPUT INSERTED.[Id], i._Position;
2025-10-04 15:44:18.981 +05:30 [INF] Executing OkObjectResult, writing value of type 'ShoeCartBackend.Models.Order'.
2025-10-04 15:44:19.037 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend) in 557.0147ms
2025-10-04 15:44:19.041 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 15:44:19.043 +05:30 [ERR] An unhandled exception has occurred while executing the request.
System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-04 15:44:19.068 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 500 null text/plain; charset=utf-8 634.5977ms
2025-10-04 15:45:09.105 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/api/Orders - null null
2025-10-04 15:45:09.117 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.GetMyOrders (ShoeCartBackend)'
2025-10-04 15:45:09.121 +05:30 [INF] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyOrders() on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 15:45:10.621 +05:30 [INF] Executed DbCommand (1,423ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[BillingCity], [o].[BillingCountry], [o].[BillingState], [o].[BillingStreet], [o].[BillingZip], [o].[CreatedBy], [o].[CreatedOn], [o].[DeletedBy], [o].[DeletedOn], [o].[IsDeleted], [o].[ModifiedBy], [o].[ModifiedOn], [o].[OrderStatus], [o].[PaymentMethod], [o].[PaymentStatus], [o].[TotalAmount], [o].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedOn], [s].[DeletedBy], [s].[DeletedOn], [s].[ImageData], [s].[ImageMimeType], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedOn], [s].[Name], [s].[OrderId], [s].[Price], [s].[ProductId], [s].[Quantity], [s].[Size], [s].[Id0], [s].[Brand], [s].[CategoryId], [s].[CreatedBy0], [s].[CreatedOn0], [s].[CurrentStock], [s].[DeletedBy0], [s].[DeletedOn0], [s].[Description], [s].[InStock], [s].[IsActive], [s].[IsDeleted0], [s].[ModifiedBy0], [s].[ModifiedOn0], [s].[Name0], [s].[Price0], [s].[SpecialOffer]
FROM [Orders] AS [o]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[CreatedBy], [o0].[CreatedOn], [o0].[DeletedBy], [o0].[DeletedOn], [o0].[ImageData], [o0].[ImageMimeType], [o0].[IsDeleted], [o0].[ModifiedBy], [o0].[ModifiedOn], [o0].[Name], [o0].[OrderId], [o0].[Price], [o0].[ProductId], [o0].[Quantity], [o0].[Size], [p].[Id] AS [Id0], [p].[Brand], [p].[CategoryId], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedOn] AS [CreatedOn0], [p].[CurrentStock], [p].[DeletedBy] AS [DeletedBy0], [p].[DeletedOn] AS [DeletedOn0], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedOn] AS [ModifiedOn0], [p].[Name] AS [Name0], [p].[Price] AS [Price0], [p].[SpecialOffer]
    FROM [OrderItems] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [s] ON [o].[Id] = [s].[OrderId]
WHERE [o].[UserId] = @__userId_0
ORDER BY [o].[CreatedOn] DESC, [o].[Id], [s].[Id]
2025-10-04 15:45:10.633 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ShoeCartBackend.Models.Order, ShoeCartBackend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-04 15:45:10.640 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.GetMyOrders (ShoeCartBackend) in 1516.4744ms
2025-10-04 15:45:10.641 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.GetMyOrders (ShoeCartBackend)'
2025-10-04 15:45:10.643 +05:30 [ERR] An unhandled exception has occurred while executing the request.
System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.UserId.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-04 15:45:10.664 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/api/Orders - 500 null text/plain; charset=utf-8 1559.3496ms
2025-10-04 15:46:22.959 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 15:46:22.996 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 37.1153ms
2025-10-04 15:46:23.124 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 15:46:23.126 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 15:46:23.140 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 13.8273ms
2025-10-04 15:46:23.165 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.7873ms
2025-10-04 15:46:23.273 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 15:46:23.310 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 37.2016ms
2025-10-04 15:46:30.525 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 15:46:30.535 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 10.1582ms
2025-10-04 15:46:30.564 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 15:46:30.564 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 15:46:30.574 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 10.0767ms
2025-10-04 15:46:30.583 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 18.5474ms
2025-10-04 15:46:30.649 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 15:46:30.682 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 34.1383ms
2025-10-04 15:46:45.546 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/api/Orders - null null
2025-10-04 15:46:45.557 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.GetMyOrders (ShoeCartBackend)'
2025-10-04 15:46:45.564 +05:30 [INF] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyOrders() on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 15:46:45.598 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[BillingCity], [o].[BillingCountry], [o].[BillingState], [o].[BillingStreet], [o].[BillingZip], [o].[CreatedBy], [o].[CreatedOn], [o].[DeletedBy], [o].[DeletedOn], [o].[IsDeleted], [o].[ModifiedBy], [o].[ModifiedOn], [o].[OrderStatus], [o].[PaymentMethod], [o].[PaymentStatus], [o].[TotalAmount], [o].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedOn], [s].[DeletedBy], [s].[DeletedOn], [s].[ImageData], [s].[ImageMimeType], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedOn], [s].[Name], [s].[OrderId], [s].[Price], [s].[ProductId], [s].[Quantity], [s].[Size], [s].[Id0], [s].[Brand], [s].[CategoryId], [s].[CreatedBy0], [s].[CreatedOn0], [s].[CurrentStock], [s].[DeletedBy0], [s].[DeletedOn0], [s].[Description], [s].[InStock], [s].[IsActive], [s].[IsDeleted0], [s].[ModifiedBy0], [s].[ModifiedOn0], [s].[Name0], [s].[Price0], [s].[SpecialOffer]
FROM [Orders] AS [o]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[CreatedBy], [o0].[CreatedOn], [o0].[DeletedBy], [o0].[DeletedOn], [o0].[ImageData], [o0].[ImageMimeType], [o0].[IsDeleted], [o0].[ModifiedBy], [o0].[ModifiedOn], [o0].[Name], [o0].[OrderId], [o0].[Price], [o0].[ProductId], [o0].[Quantity], [o0].[Size], [p].[Id] AS [Id0], [p].[Brand], [p].[CategoryId], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedOn] AS [CreatedOn0], [p].[CurrentStock], [p].[DeletedBy] AS [DeletedBy0], [p].[DeletedOn] AS [DeletedOn0], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedOn] AS [ModifiedOn0], [p].[Name] AS [Name0], [p].[Price] AS [Price0], [p].[SpecialOffer]
    FROM [OrderItems] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [s] ON [o].[Id] = [s].[OrderId]
WHERE [o].[UserId] = @__userId_0
ORDER BY [o].[CreatedOn] DESC, [o].[Id], [s].[Id]
2025-10-04 15:46:45.604 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ShoeCartBackend.Models.Order, ShoeCartBackend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-04 15:46:45.618 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.GetMyOrders (ShoeCartBackend) in 50.2778ms
2025-10-04 15:46:45.620 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.GetMyOrders (ShoeCartBackend)'
2025-10-04 15:46:45.623 +05:30 [ERR] An unhandled exception has occurred while executing the request.
System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.UserId.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-04 15:46:45.652 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/api/Orders - 500 null text/plain; charset=utf-8 107.8669ms
2025-10-04 15:46:54.252 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 179
2025-10-04 15:46:54.266 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 15:46:54.272 +05:30 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 15:46:54.304 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CartId], [c].[ImageData], [c].[ImageMimeType], [c].[Name], [c].[Price], [c].[ProductId], [c].[Quantity], [c].[Size], [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c0].[Id], [c0].[IsDeleted], [c0].[UserId]
FROM [CartItems] AS [c]
INNER JOIN [Carts] AS [c0] ON [c].[CartId] = [c0].[Id]
INNER JOIN [Products] AS [p] ON [c].[ProductId] = [p].[Id]
WHERE [c0].[UserId] = @__userId_0
2025-10-04 15:46:54.406 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend) in 131.2733ms
2025-10-04 15:46:54.408 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 15:46:54.410 +05:30 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Cart is empty
   at ShoeCartBackend.Services.OrderService.CreateOrderAsync(Int32 userId, CreateOrderDto dto)
   at ShoeCartBackend.Controllers.OrdersController.CreateOrder(CreateOrderDto dto)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-04 15:46:54.417 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 500 null text/plain; charset=utf-8 165.8096ms
2025-10-04 15:47:43.403 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 180
2025-10-04 15:47:43.409 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 15:47:43.410 +05:30 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 15:47:43.429 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CartId], [c].[ImageData], [c].[ImageMimeType], [c].[Name], [c].[Price], [c].[ProductId], [c].[Quantity], [c].[Size], [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c0].[Id], [c0].[IsDeleted], [c0].[UserId]
FROM [CartItems] AS [c]
INNER JOIN [Carts] AS [c0] ON [c].[CartId] = [c0].[Id]
INNER JOIN [Products] AS [p] ON [c].[ProductId] = [p].[Id]
WHERE [c0].[UserId] = @__userId_0
2025-10-04 15:47:43.499 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend) in 87.0813ms
2025-10-04 15:47:43.501 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 15:47:43.503 +05:30 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Cart is empty
   at ShoeCartBackend.Services.OrderService.CreateOrderAsync(Int32 userId, CreateOrderDto dto)
   at ShoeCartBackend.Controllers.OrdersController.CreateOrder(CreateOrderDto dto)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-04 15:47:43.508 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 500 null text/plain; charset=utf-8 105.6133ms
2025-10-04 15:47:56.575 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/api/Cart - null null
2025-10-04 15:47:56.588 +05:30 [INF] Executing endpoint 'CartController.Get (ShoeCartBackend)'
2025-10-04 15:47:56.592 +05:30 [INF] Route matched with {action = "Get", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller CartController (ShoeCartBackend).
2025-10-04 15:47:56.611 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[IsDeleted], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[ImageData], [c0].[ImageMimeType], [c0].[Name], [c0].[Price], [c0].[ProductId], [c0].[Quantity], [c0].[Size]
FROM (
    SELECT TOP(1) [c].[Id], [c].[IsDeleted], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
2025-10-04 15:47:56.617 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 15:47:56.625 +05:30 [INF] Executed action CartController.Get (ShoeCartBackend) in 29.7609ms
2025-10-04 15:47:56.626 +05:30 [INF] Executed endpoint 'CartController.Get (ShoeCartBackend)'
2025-10-04 15:47:56.629 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/api/Cart - 200 null application/json; charset=utf-8 54.1224ms
2025-10-04 15:48:11.005 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Cart - application/json 52
2025-10-04 15:48:11.010 +05:30 [INF] Executing endpoint 'CartController.Add (ShoeCartBackend)'
2025-10-04 15:48:11.015 +05:30 [INF] Route matched with {action = "Add", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(ShoeCartBackend.DTOs.CartDTO.AddToCartDTO) on controller CartController (ShoeCartBackend).
2025-10-04 15:48:11.055 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-04 15:48:11.102 +05:30 [INF] Executed DbCommand (24ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Brand], [s].[CategoryId], [s].[CreatedBy], [s].[CreatedOn], [s].[CurrentStock], [s].[DeletedBy], [s].[DeletedOn], [s].[Description], [s].[InStock], [s].[IsActive], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedOn], [s].[Name], [s].[Price], [s].[SpecialOffer], [s].[Id0], [s].[CreatedBy0], [s].[CreatedOn0], [s].[DeletedBy0], [s].[DeletedOn0], [s].[IsDeleted0], [s].[ModifiedBy0], [s].[ModifiedOn0], [s].[Name0], [p0].[Id], [p0].[CreatedBy], [p0].[CreatedOn], [p0].[DeletedBy], [p0].[DeletedOn], [p0].[IsDeleted], [p0].[ModifiedBy], [p0].[ModifiedOn], [p0].[ProductId], [p0].[Size], [p1].[Id], [p1].[CreatedBy], [p1].[CreatedOn], [p1].[DeletedBy], [p1].[DeletedOn], [p1].[ImageData], [p1].[ImageMimeType], [p1].[IsDeleted], [p1].[IsMain], [p1].[ModifiedBy], [p1].[ModifiedOn], [p1].[ProductId]
FROM (
    SELECT TOP(1) [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c].[Id] AS [Id0], [c].[CreatedBy] AS [CreatedBy0], [c].[CreatedOn] AS [CreatedOn0], [c].[DeletedBy] AS [DeletedBy0], [c].[DeletedOn] AS [DeletedOn0], [c].[IsDeleted] AS [IsDeleted0], [c].[ModifiedBy] AS [ModifiedBy0], [c].[ModifiedOn] AS [ModifiedOn0], [c].[Name] AS [Name0]
    FROM [Products] AS [p]
    INNER JOIN [Categories] AS [c] ON [p].[CategoryId] = [c].[Id]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [ProductSize] AS [p0] ON [s].[Id] = [p0].[ProductId]
LEFT JOIN [ProductImage] AS [p1] ON [s].[Id] = [p1].[ProductId]
ORDER BY [s].[Id], [s].[Id0], [p0].[Id]
2025-10-04 15:48:11.106 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 15:48:11.111 +05:30 [INF] Executed action CartController.Add (ShoeCartBackend) in 93.9592ms
2025-10-04 15:48:11.113 +05:30 [INF] Executed endpoint 'CartController.Add (ShoeCartBackend)'
2025-10-04 15:48:11.115 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Cart - 404 null application/json; charset=utf-8 110.3091ms
2025-10-04 15:48:17.004 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Cart - application/json 53
2025-10-04 15:48:17.019 +05:30 [INF] Executing endpoint 'CartController.Add (ShoeCartBackend)'
2025-10-04 15:48:17.026 +05:30 [INF] Route matched with {action = "Add", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(ShoeCartBackend.DTOs.CartDTO.AddToCartDTO) on controller CartController (ShoeCartBackend).
2025-10-04 15:48:17.052 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Brand], [s].[CategoryId], [s].[CreatedBy], [s].[CreatedOn], [s].[CurrentStock], [s].[DeletedBy], [s].[DeletedOn], [s].[Description], [s].[InStock], [s].[IsActive], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedOn], [s].[Name], [s].[Price], [s].[SpecialOffer], [s].[Id0], [s].[CreatedBy0], [s].[CreatedOn0], [s].[DeletedBy0], [s].[DeletedOn0], [s].[IsDeleted0], [s].[ModifiedBy0], [s].[ModifiedOn0], [s].[Name0], [p0].[Id], [p0].[CreatedBy], [p0].[CreatedOn], [p0].[DeletedBy], [p0].[DeletedOn], [p0].[IsDeleted], [p0].[ModifiedBy], [p0].[ModifiedOn], [p0].[ProductId], [p0].[Size], [p1].[Id], [p1].[CreatedBy], [p1].[CreatedOn], [p1].[DeletedBy], [p1].[DeletedOn], [p1].[ImageData], [p1].[ImageMimeType], [p1].[IsDeleted], [p1].[IsMain], [p1].[ModifiedBy], [p1].[ModifiedOn], [p1].[ProductId]
FROM (
    SELECT TOP(1) [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c].[Id] AS [Id0], [c].[CreatedBy] AS [CreatedBy0], [c].[CreatedOn] AS [CreatedOn0], [c].[DeletedBy] AS [DeletedBy0], [c].[DeletedOn] AS [DeletedOn0], [c].[IsDeleted] AS [IsDeleted0], [c].[ModifiedBy] AS [ModifiedBy0], [c].[ModifiedOn] AS [ModifiedOn0], [c].[Name] AS [Name0]
    FROM [Products] AS [p]
    INNER JOIN [Categories] AS [c] ON [p].[CategoryId] = [c].[Id]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [ProductSize] AS [p0] ON [s].[Id] = [p0].[ProductId]
LEFT JOIN [ProductImage] AS [p1] ON [s].[Id] = [p1].[ProductId]
ORDER BY [s].[Id], [s].[Id0], [p0].[Id]
2025-10-04 15:48:17.081 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[IsDeleted], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[ImageData], [c0].[ImageMimeType], [c0].[Name], [c0].[Price], [c0].[ProductId], [c0].[Quantity], [c0].[Size]
FROM (
    SELECT TOP(1) [c].[Id], [c].[IsDeleted], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
2025-10-04 15:48:17.108 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CartItems] ([CartId], [ImageData], [ImageMimeType], [Name], [Price], [ProductId], [Quantity], [Size])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-10-04 15:48:17.113 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 15:48:17.115 +05:30 [INF] Executed action CartController.Add (ShoeCartBackend) in 84.793ms
2025-10-04 15:48:17.118 +05:30 [INF] Executed endpoint 'CartController.Add (ShoeCartBackend)'
2025-10-04 15:48:17.119 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Cart - 200 null application/json; charset=utf-8 115.8864ms
2025-10-04 15:48:22.501 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 180
2025-10-04 15:48:22.505 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 15:48:22.507 +05:30 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 15:48:22.540 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CartId], [c].[ImageData], [c].[ImageMimeType], [c].[Name], [c].[Price], [c].[ProductId], [c].[Quantity], [c].[Size], [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c0].[Id], [c0].[IsDeleted], [c0].[UserId]
FROM [CartItems] AS [c]
INNER JOIN [Carts] AS [c0] ON [c].[CartId] = [c0].[Id]
INNER JOIN [Products] AS [p] ON [c].[ProductId] = [p].[Id]
WHERE [c0].[UserId] = @__userId_0
2025-10-04 15:48:22.555 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p0;
INSERT INTO [Orders] ([BillingCity], [BillingCountry], [BillingState], [BillingStreet], [BillingZip], [CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [IsDeleted], [ModifiedBy], [ModifiedOn], [OrderStatus], [PaymentMethod], [PaymentStatus], [TotalAmount], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2025-10-04 15:48:22.564 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p18='?' (Size = 4000), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (DbType = DateTime2), @p22='?' (Size = 8000) (DbType = Binary), @p23='?' (Size = 4000), @p24='?' (DbType = Boolean), @p25='?' (Size = 4000), @p26='?' (DbType = DateTime2), @p27='?' (Size = 4000), @p28='?' (DbType = Int32), @p29='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p30='?' (DbType = Int32), @p31='?' (DbType = Int32), @p32='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [ImageData], [ImageMimeType], [IsDeleted], [ModifiedBy], [ModifiedOn], [Name], [OrderId], [Price], [ProductId], [Quantity], [Size])
OUTPUT INSERTED.[Id]
VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32);
2025-10-04 15:48:22.568 +05:30 [INF] Executing OkObjectResult, writing value of type 'ShoeCartBackend.Models.Order'.
2025-10-04 15:48:22.571 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend) in 46.1199ms
2025-10-04 15:48:22.573 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 15:48:22.576 +05:30 [ERR] An unhandled exception has occurred while executing the request.
System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.Order.Items.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-04 15:48:22.601 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 500 null text/plain; charset=utf-8 97.7522ms
2025-10-04 15:48:32.683 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 180
2025-10-04 15:48:32.688 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 15:48:32.702 +05:30 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 15:48:32.723 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CartId], [c].[ImageData], [c].[ImageMimeType], [c].[Name], [c].[Price], [c].[ProductId], [c].[Quantity], [c].[Size], [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c0].[Id], [c0].[IsDeleted], [c0].[UserId]
FROM [CartItems] AS [c]
INNER JOIN [Carts] AS [c0] ON [c].[CartId] = [c0].[Id]
INNER JOIN [Products] AS [p] ON [c].[ProductId] = [p].[Id]
WHERE [c0].[UserId] = @__userId_0
2025-10-04 15:48:32.806 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend) in 97.0576ms
2025-10-04 15:48:32.808 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 15:48:32.811 +05:30 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Cart is empty
   at ShoeCartBackend.Services.OrderService.CreateOrderAsync(Int32 userId, CreateOrderDto dto)
   at ShoeCartBackend.Controllers.OrdersController.CreateOrder(CreateOrderDto dto)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-04 15:48:32.819 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 500 null text/plain; charset=utf-8 135.5521ms
2025-10-04 16:06:46.683 +05:30 [INF] User profile is available. Using 'C:\Users\rinsh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-04 16:06:47.377 +05:30 [INF] Now listening on: http://localhost:58477
2025-10-04 16:06:47.381 +05:30 [INF] Now listening on: https://localhost:58476
2025-10-04 16:06:47.747 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-04 16:06:47.750 +05:30 [INF] Hosting environment: Development
2025-10-04 16:06:47.753 +05:30 [INF] Content root path: C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend
2025-10-04 16:06:49.128 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:58477/ - null null
2025-10-04 16:06:50.874 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:58477/ - 307 0 null 1766.7048ms
2025-10-04 16:06:51.247 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/ - null null
2025-10-04 16:06:51.787 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/ - 404 0 null 539.9295ms
2025-10-04 16:06:51.836 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:58476/, Response status code: 404
2025-10-04 16:06:59.456 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 16:07:00.870 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 1414.1301ms
2025-10-04 16:07:01.026 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 16:07:00.990 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 16:07:01.289 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 298.8704ms
2025-10-04 16:07:01.937 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 915.7572ms
2025-10-04 16:07:02.110 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 16:07:02.373 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 263.1697ms
2025-10-04 16:07:23.700 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/api/Cart - null null
2025-10-04 16:07:23.829 +05:30 [INF] Executing endpoint 'CartController.Get (ShoeCartBackend)'
2025-10-04 16:07:23.868 +05:30 [INF] Route matched with {action = "Get", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller CartController (ShoeCartBackend).
2025-10-04 16:07:24.778 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 16:07:24.782 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 16:07:26.133 +05:30 [INF] Executed DbCommand (182ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[IsDeleted], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[ImageData], [c0].[ImageMimeType], [c0].[Name], [c0].[Price], [c0].[ProductId], [c0].[Quantity], [c0].[Size]
FROM (
    SELECT TOP(1) [c].[Id], [c].[IsDeleted], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
2025-10-04 16:07:26.227 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 16:07:26.245 +05:30 [INF] Executed action CartController.Get (ShoeCartBackend) in 2371.2937ms
2025-10-04 16:07:26.247 +05:30 [INF] Executed endpoint 'CartController.Get (ShoeCartBackend)'
2025-10-04 16:07:26.256 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/api/Cart - 200 null application/json; charset=utf-8 2559.4358ms
2025-10-04 16:07:39.888 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Cart - application/json 53
2025-10-04 16:07:39.910 +05:30 [INF] Executing endpoint 'CartController.Add (ShoeCartBackend)'
2025-10-04 16:07:39.932 +05:30 [INF] Route matched with {action = "Add", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(ShoeCartBackend.DTOs.CartDTO.AddToCartDTO) on controller CartController (ShoeCartBackend).
2025-10-04 16:07:40.060 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-04 16:07:40.132 +05:30 [INF] Executed DbCommand (45ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Brand], [s].[CategoryId], [s].[CreatedBy], [s].[CreatedOn], [s].[CurrentStock], [s].[DeletedBy], [s].[DeletedOn], [s].[Description], [s].[InStock], [s].[IsActive], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedOn], [s].[Name], [s].[Price], [s].[SpecialOffer], [s].[Id0], [s].[CreatedBy0], [s].[CreatedOn0], [s].[DeletedBy0], [s].[DeletedOn0], [s].[IsDeleted0], [s].[ModifiedBy0], [s].[ModifiedOn0], [s].[Name0], [p0].[Id], [p0].[CreatedBy], [p0].[CreatedOn], [p0].[DeletedBy], [p0].[DeletedOn], [p0].[IsDeleted], [p0].[ModifiedBy], [p0].[ModifiedOn], [p0].[ProductId], [p0].[Size], [p1].[Id], [p1].[CreatedBy], [p1].[CreatedOn], [p1].[DeletedBy], [p1].[DeletedOn], [p1].[ImageData], [p1].[ImageMimeType], [p1].[IsDeleted], [p1].[IsMain], [p1].[ModifiedBy], [p1].[ModifiedOn], [p1].[ProductId]
FROM (
    SELECT TOP(1) [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c].[Id] AS [Id0], [c].[CreatedBy] AS [CreatedBy0], [c].[CreatedOn] AS [CreatedOn0], [c].[DeletedBy] AS [DeletedBy0], [c].[DeletedOn] AS [DeletedOn0], [c].[IsDeleted] AS [IsDeleted0], [c].[ModifiedBy] AS [ModifiedBy0], [c].[ModifiedOn] AS [ModifiedOn0], [c].[Name] AS [Name0]
    FROM [Products] AS [p]
    INNER JOIN [Categories] AS [c] ON [p].[CategoryId] = [c].[Id]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [ProductSize] AS [p0] ON [s].[Id] = [p0].[ProductId]
LEFT JOIN [ProductImage] AS [p1] ON [s].[Id] = [p1].[ProductId]
ORDER BY [s].[Id], [s].[Id0], [p0].[Id]
2025-10-04 16:07:40.254 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[IsDeleted], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[ImageData], [c0].[ImageMimeType], [c0].[Name], [c0].[Price], [c0].[ProductId], [c0].[Quantity], [c0].[Size]
FROM (
    SELECT TOP(1) [c].[Id], [c].[IsDeleted], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
2025-10-04 16:07:40.507 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CartItems] ([CartId], [ImageData], [ImageMimeType], [Name], [Price], [ProductId], [Quantity], [Size])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-10-04 16:07:40.541 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 16:07:40.547 +05:30 [INF] Executed action CartController.Add (ShoeCartBackend) in 610.6511ms
2025-10-04 16:07:40.549 +05:30 [INF] Executed endpoint 'CartController.Add (ShoeCartBackend)'
2025-10-04 16:07:40.551 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Cart - 200 null application/json; charset=utf-8 663.1292ms
2025-10-04 16:07:43.377 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/api/Cart - null null
2025-10-04 16:07:43.383 +05:30 [INF] Executing endpoint 'CartController.Get (ShoeCartBackend)'
2025-10-04 16:07:43.386 +05:30 [INF] Route matched with {action = "Get", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller CartController (ShoeCartBackend).
2025-10-04 16:07:43.418 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[IsDeleted], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[ImageData], [c0].[ImageMimeType], [c0].[Name], [c0].[Price], [c0].[ProductId], [c0].[Quantity], [c0].[Size]
FROM (
    SELECT TOP(1) [c].[Id], [c].[IsDeleted], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
2025-10-04 16:07:43.426 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 16:07:43.440 +05:30 [INF] Executed action CartController.Get (ShoeCartBackend) in 52.5373ms
2025-10-04 16:07:43.442 +05:30 [INF] Executed endpoint 'CartController.Get (ShoeCartBackend)'
2025-10-04 16:07:43.444 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/api/Cart - 200 null application/json; charset=utf-8 67.7115ms
2025-10-04 16:08:43.234 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 180
2025-10-04 16:08:43.248 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 16:08:43.253 +05:30 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 16:08:43.483 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CartId], [c].[ImageData], [c].[ImageMimeType], [c].[Name], [c].[Price], [c].[ProductId], [c].[Quantity], [c].[Size], [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c0].[Id], [c0].[IsDeleted], [c0].[UserId]
FROM [CartItems] AS [c]
INNER JOIN [Carts] AS [c0] ON [c].[CartId] = [c0].[Id]
INNER JOIN [Products] AS [p] ON [c].[ProductId] = [p].[Id]
WHERE [c0].[UserId] = @__userId_0
2025-10-04 16:08:43.639 +05:30 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p0;
INSERT INTO [Orders] ([BillingCity], [BillingCountry], [BillingState], [BillingStreet], [BillingZip], [CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [IsDeleted], [ModifiedBy], [ModifiedOn], [OrderStatus], [PaymentMethod], [PaymentStatus], [TotalAmount], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2025-10-04 16:08:43.657 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p18='?' (Size = 4000), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (DbType = DateTime2), @p22='?' (Size = 8000) (DbType = Binary), @p23='?' (Size = 4000), @p24='?' (DbType = Boolean), @p25='?' (Size = 4000), @p26='?' (DbType = DateTime2), @p27='?' (Size = 4000), @p28='?' (DbType = Int32), @p29='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p30='?' (DbType = Int32), @p31='?' (DbType = Int32), @p32='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [ImageData], [ImageMimeType], [IsDeleted], [ModifiedBy], [ModifiedOn], [Name], [OrderId], [Price], [ProductId], [Quantity], [Size])
OUTPUT INSERTED.[Id]
VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32);
2025-10-04 16:08:43.693 +05:30 [INF] Executing OkObjectResult, writing value of type 'OrderDto'.
2025-10-04 16:08:43.705 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend) in 450.2887ms
2025-10-04 16:08:43.707 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 16:08:43.709 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 200 null application/json; charset=utf-8 477.6964ms
2025-10-04 16:22:39.006 +05:30 [INF] User profile is available. Using 'C:\Users\rinsh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-04 16:22:39.405 +05:30 [INF] Now listening on: http://localhost:58477
2025-10-04 16:22:39.407 +05:30 [INF] Now listening on: https://localhost:58476
2025-10-04 16:22:40.029 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-04 16:22:40.031 +05:30 [INF] Hosting environment: Development
2025-10-04 16:22:40.051 +05:30 [INF] Content root path: C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend
2025-10-04 16:22:40.784 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:58477/ - null null
2025-10-04 16:22:41.135 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:58477/ - 307 0 null 378.9989ms
2025-10-04 16:22:41.378 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/ - null null
2025-10-04 16:22:41.564 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/ - 404 0 null 190.4611ms
2025-10-04 16:22:41.580 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:58476/, Response status code: 404
2025-10-04 16:22:42.576 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/index.html - null null
2025-10-04 16:22:42.672 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/index.html - 200 null text/html;charset=utf-8 95.1826ms
2025-10-04 16:22:42.733 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 16:22:42.755 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 22.2014ms
2025-10-04 16:22:42.775 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/_vs/browserLink - null null
2025-10-04 16:22:42.842 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/_vs/browserLink - 200 null text/javascript; charset=UTF-8 67.551ms
2025-10-04 16:22:42.923 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - null null
2025-10-04 16:22:42.962 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 39.2892ms
2025-10-04 16:23:09.807 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 179
2025-10-04 16:23:09.980 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 16:23:10.023 +05:30 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 16:23:11.156 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 16:23:11.159 +05:30 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-04 16:23:12.512 +05:30 [INF] Executed DbCommand (198ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CartId], [c].[ImageData], [c].[ImageMimeType], [c].[Name], [c].[Price], [c].[ProductId], [c].[Quantity], [c].[Size], [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c0].[Id], [c0].[IsDeleted], [c0].[UserId]
FROM [CartItems] AS [c]
INNER JOIN [Carts] AS [c0] ON [c].[CartId] = [c0].[Id]
INNER JOIN [Products] AS [p] ON [c].[ProductId] = [p].[Id]
WHERE [c0].[UserId] = @__userId_0
2025-10-04 16:23:12.647 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend) in 2617.1888ms
2025-10-04 16:23:12.650 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 16:23:12.656 +05:30 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Cart is empty
   at ShoeCartBackend.Services.OrderService.CreateOrderAsync(Int32 userId, CreateOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Services\Implementations\OrderService.cs:line 36
   at ShoeCartBackend.Controllers.OrdersController.CreateOrder(CreateOrderDto dto) in C:\Users\rinsh\source\repos\ShoeCartBackend\ShoeCartBackend\Controllers\OrderController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-04 16:23:12.724 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 500 null text/plain; charset=utf-8 2916.6519ms
2025-10-04 16:23:53.486 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Cart - application/json 53
2025-10-04 16:23:53.514 +05:30 [INF] Executing endpoint 'CartController.Add (ShoeCartBackend)'
2025-10-04 16:23:53.528 +05:30 [INF] Route matched with {action = "Add", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(ShoeCartBackend.DTOs.CartDTO.AddToCartDTO) on controller CartController (ShoeCartBackend).
2025-10-04 16:23:53.599 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-04 16:23:53.684 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Brand], [s].[CategoryId], [s].[CreatedBy], [s].[CreatedOn], [s].[CurrentStock], [s].[DeletedBy], [s].[DeletedOn], [s].[Description], [s].[InStock], [s].[IsActive], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedOn], [s].[Name], [s].[Price], [s].[SpecialOffer], [s].[Id0], [s].[CreatedBy0], [s].[CreatedOn0], [s].[DeletedBy0], [s].[DeletedOn0], [s].[IsDeleted0], [s].[ModifiedBy0], [s].[ModifiedOn0], [s].[Name0], [p0].[Id], [p0].[CreatedBy], [p0].[CreatedOn], [p0].[DeletedBy], [p0].[DeletedOn], [p0].[IsDeleted], [p0].[ModifiedBy], [p0].[ModifiedOn], [p0].[ProductId], [p0].[Size], [p1].[Id], [p1].[CreatedBy], [p1].[CreatedOn], [p1].[DeletedBy], [p1].[DeletedOn], [p1].[ImageData], [p1].[ImageMimeType], [p1].[IsDeleted], [p1].[IsMain], [p1].[ModifiedBy], [p1].[ModifiedOn], [p1].[ProductId]
FROM (
    SELECT TOP(1) [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c].[Id] AS [Id0], [c].[CreatedBy] AS [CreatedBy0], [c].[CreatedOn] AS [CreatedOn0], [c].[DeletedBy] AS [DeletedBy0], [c].[DeletedOn] AS [DeletedOn0], [c].[IsDeleted] AS [IsDeleted0], [c].[ModifiedBy] AS [ModifiedBy0], [c].[ModifiedOn] AS [ModifiedOn0], [c].[Name] AS [Name0]
    FROM [Products] AS [p]
    INNER JOIN [Categories] AS [c] ON [p].[CategoryId] = [c].[Id]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [ProductSize] AS [p0] ON [s].[Id] = [p0].[ProductId]
LEFT JOIN [ProductImage] AS [p1] ON [s].[Id] = [p1].[ProductId]
ORDER BY [s].[Id], [s].[Id0], [p0].[Id]
2025-10-04 16:23:53.848 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[IsDeleted], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[ImageData], [c0].[ImageMimeType], [c0].[Name], [c0].[Price], [c0].[ProductId], [c0].[Quantity], [c0].[Size]
FROM (
    SELECT TOP(1) [c].[Id], [c].[IsDeleted], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
2025-10-04 16:23:54.114 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CartItems] ([CartId], [ImageData], [ImageMimeType], [Name], [Price], [ProductId], [Quantity], [Size])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-10-04 16:23:54.147 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 16:23:54.155 +05:30 [INF] Executed action CartController.Add (ShoeCartBackend) in 625.2572ms
2025-10-04 16:23:54.157 +05:30 [INF] Executed endpoint 'CartController.Add (ShoeCartBackend)'
2025-10-04 16:23:54.159 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Cart - 200 null application/json; charset=utf-8 674.2596ms
2025-10-04 16:24:05.144 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Cart - application/json 53
2025-10-04 16:24:05.161 +05:30 [INF] Executing endpoint 'CartController.Add (ShoeCartBackend)'
2025-10-04 16:24:05.163 +05:30 [INF] Route matched with {action = "Add", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(ShoeCartBackend.DTOs.CartDTO.AddToCartDTO) on controller CartController (ShoeCartBackend).
2025-10-04 16:24:05.228 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Brand], [s].[CategoryId], [s].[CreatedBy], [s].[CreatedOn], [s].[CurrentStock], [s].[DeletedBy], [s].[DeletedOn], [s].[Description], [s].[InStock], [s].[IsActive], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedOn], [s].[Name], [s].[Price], [s].[SpecialOffer], [s].[Id0], [s].[CreatedBy0], [s].[CreatedOn0], [s].[DeletedBy0], [s].[DeletedOn0], [s].[IsDeleted0], [s].[ModifiedBy0], [s].[ModifiedOn0], [s].[Name0], [p0].[Id], [p0].[CreatedBy], [p0].[CreatedOn], [p0].[DeletedBy], [p0].[DeletedOn], [p0].[IsDeleted], [p0].[ModifiedBy], [p0].[ModifiedOn], [p0].[ProductId], [p0].[Size], [p1].[Id], [p1].[CreatedBy], [p1].[CreatedOn], [p1].[DeletedBy], [p1].[DeletedOn], [p1].[ImageData], [p1].[ImageMimeType], [p1].[IsDeleted], [p1].[IsMain], [p1].[ModifiedBy], [p1].[ModifiedOn], [p1].[ProductId]
FROM (
    SELECT TOP(1) [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c].[Id] AS [Id0], [c].[CreatedBy] AS [CreatedBy0], [c].[CreatedOn] AS [CreatedOn0], [c].[DeletedBy] AS [DeletedBy0], [c].[DeletedOn] AS [DeletedOn0], [c].[IsDeleted] AS [IsDeleted0], [c].[ModifiedBy] AS [ModifiedBy0], [c].[ModifiedOn] AS [ModifiedOn0], [c].[Name] AS [Name0]
    FROM [Products] AS [p]
    INNER JOIN [Categories] AS [c] ON [p].[CategoryId] = [c].[Id]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [ProductSize] AS [p0] ON [s].[Id] = [p0].[ProductId]
LEFT JOIN [ProductImage] AS [p1] ON [s].[Id] = [p1].[ProductId]
ORDER BY [s].[Id], [s].[Id0], [p0].[Id]
2025-10-04 16:24:05.242 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[IsDeleted], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[ImageData], [c0].[ImageMimeType], [c0].[Name], [c0].[Price], [c0].[ProductId], [c0].[Quantity], [c0].[Size]
FROM (
    SELECT TOP(1) [c].[Id], [c].[IsDeleted], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
2025-10-04 16:24:05.263 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CartItems] ([CartId], [ImageData], [ImageMimeType], [Name], [Price], [ProductId], [Quantity], [Size])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-10-04 16:24:05.268 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 16:24:05.270 +05:30 [INF] Executed action CartController.Add (ShoeCartBackend) in 104.8632ms
2025-10-04 16:24:05.272 +05:30 [INF] Executed endpoint 'CartController.Add (ShoeCartBackend)'
2025-10-04 16:24:05.274 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Cart - 200 null application/json; charset=utf-8 140.5216ms
2025-10-04 16:24:10.321 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Cart - application/json 53
2025-10-04 16:24:10.324 +05:30 [INF] Executing endpoint 'CartController.Add (ShoeCartBackend)'
2025-10-04 16:24:10.337 +05:30 [INF] Route matched with {action = "Add", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(ShoeCartBackend.DTOs.CartDTO.AddToCartDTO) on controller CartController (ShoeCartBackend).
2025-10-04 16:24:10.355 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Brand], [s].[CategoryId], [s].[CreatedBy], [s].[CreatedOn], [s].[CurrentStock], [s].[DeletedBy], [s].[DeletedOn], [s].[Description], [s].[InStock], [s].[IsActive], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedOn], [s].[Name], [s].[Price], [s].[SpecialOffer], [s].[Id0], [s].[CreatedBy0], [s].[CreatedOn0], [s].[DeletedBy0], [s].[DeletedOn0], [s].[IsDeleted0], [s].[ModifiedBy0], [s].[ModifiedOn0], [s].[Name0], [p0].[Id], [p0].[CreatedBy], [p0].[CreatedOn], [p0].[DeletedBy], [p0].[DeletedOn], [p0].[IsDeleted], [p0].[ModifiedBy], [p0].[ModifiedOn], [p0].[ProductId], [p0].[Size], [p1].[Id], [p1].[CreatedBy], [p1].[CreatedOn], [p1].[DeletedBy], [p1].[DeletedOn], [p1].[ImageData], [p1].[ImageMimeType], [p1].[IsDeleted], [p1].[IsMain], [p1].[ModifiedBy], [p1].[ModifiedOn], [p1].[ProductId]
FROM (
    SELECT TOP(1) [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c].[Id] AS [Id0], [c].[CreatedBy] AS [CreatedBy0], [c].[CreatedOn] AS [CreatedOn0], [c].[DeletedBy] AS [DeletedBy0], [c].[DeletedOn] AS [DeletedOn0], [c].[IsDeleted] AS [IsDeleted0], [c].[ModifiedBy] AS [ModifiedBy0], [c].[ModifiedOn] AS [ModifiedOn0], [c].[Name] AS [Name0]
    FROM [Products] AS [p]
    INNER JOIN [Categories] AS [c] ON [p].[CategoryId] = [c].[Id]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [ProductSize] AS [p0] ON [s].[Id] = [p0].[ProductId]
LEFT JOIN [ProductImage] AS [p1] ON [s].[Id] = [p1].[ProductId]
ORDER BY [s].[Id], [s].[Id0], [p0].[Id]
2025-10-04 16:24:10.359 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[IsDeleted], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[ImageData], [c0].[ImageMimeType], [c0].[Name], [c0].[Price], [c0].[ProductId], [c0].[Quantity], [c0].[Size]
FROM (
    SELECT TOP(1) [c].[Id], [c].[IsDeleted], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
2025-10-04 16:24:10.364 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CartItems] ([CartId], [ImageData], [ImageMimeType], [Name], [Price], [ProductId], [Quantity], [Size])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-10-04 16:24:10.367 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 16:24:10.369 +05:30 [INF] Executed action CartController.Add (ShoeCartBackend) in 21.2024ms
2025-10-04 16:24:10.370 +05:30 [INF] Executed endpoint 'CartController.Add (ShoeCartBackend)'
2025-10-04 16:24:10.371 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Cart - 200 null application/json; charset=utf-8 50.3796ms
2025-10-04 16:24:18.371 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 179
2025-10-04 16:24:18.389 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 16:24:18.396 +05:30 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 16:24:18.424 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CartId], [c].[ImageData], [c].[ImageMimeType], [c].[Name], [c].[Price], [c].[ProductId], [c].[Quantity], [c].[Size], [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c0].[Id], [c0].[IsDeleted], [c0].[UserId]
FROM [CartItems] AS [c]
INNER JOIN [Carts] AS [c0] ON [c].[CartId] = [c0].[Id]
INNER JOIN [Products] AS [p] ON [c].[ProductId] = [p].[Id]
WHERE [c0].[UserId] = @__userId_0
2025-10-04 16:24:18.568 +05:30 [INF] Executed DbCommand (31ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p19='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p1;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p2;
INSERT INTO [Orders] ([BillingCity], [BillingCountry], [BillingState], [BillingStreet], [BillingZip], [CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [IsDeleted], [ModifiedBy], [ModifiedOn], [OrderStatus], [PaymentMethod], [PaymentStatus], [TotalAmount], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-10-04 16:24:18.640 +05:30 [INF] Executed DbCommand (56ms) [Parameters=[@p20='?' (Size = 4000), @p21='?' (DbType = DateTime2), @p22='?' (Size = 4000), @p23='?' (DbType = DateTime2), @p24='?' (Size = 8000) (DbType = Binary), @p25='?' (Size = 4000), @p26='?' (DbType = Boolean), @p27='?' (Size = 4000), @p28='?' (DbType = DateTime2), @p29='?' (Size = 4000), @p30='?' (DbType = Int32), @p31='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p32='?' (DbType = Int32), @p33='?' (DbType = Int32), @p34='?' (Size = 4000), @p35='?' (Size = 4000), @p36='?' (DbType = DateTime2), @p37='?' (Size = 4000), @p38='?' (DbType = DateTime2), @p39='?' (Size = 8000) (DbType = Binary), @p40='?' (Size = 4000), @p41='?' (DbType = Boolean), @p42='?' (Size = 4000), @p43='?' (DbType = DateTime2), @p44='?' (Size = 4000), @p45='?' (DbType = Int32), @p46='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (Size = 4000), @p50='?' (Size = 4000), @p51='?' (DbType = DateTime2), @p52='?' (Size = 4000), @p53='?' (DbType = DateTime2), @p54='?' (Size = 8000) (DbType = Binary), @p55='?' (Size = 4000), @p56='?' (DbType = Boolean), @p57='?' (Size = 4000), @p58='?' (DbType = DateTime2), @p59='?' (Size = 4000), @p60='?' (DbType = Int32), @p61='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p62='?' (DbType = Int32), @p63='?' (DbType = Int32), @p64='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, 0),
(@p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, 1),
(@p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, 2)) AS i ([CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [ImageData], [ImageMimeType], [IsDeleted], [ModifiedBy], [ModifiedOn], [Name], [OrderId], [Price], [ProductId], [Quantity], [Size], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [ImageData], [ImageMimeType], [IsDeleted], [ModifiedBy], [ModifiedOn], [Name], [OrderId], [Price], [ProductId], [Quantity], [Size])
VALUES (i.[CreatedBy], i.[CreatedOn], i.[DeletedBy], i.[DeletedOn], i.[ImageData], i.[ImageMimeType], i.[IsDeleted], i.[ModifiedBy], i.[ModifiedOn], i.[Name], i.[OrderId], i.[Price], i.[ProductId], i.[Quantity], i.[Size])
OUTPUT INSERTED.[Id], i._Position;
2025-10-04 16:24:18.672 +05:30 [INF] Executing OkObjectResult, writing value of type 'OrderDto'.
2025-10-04 16:24:18.690 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend) in 286.315ms
2025-10-04 16:24:18.692 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 16:24:18.694 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 200 null application/json; charset=utf-8 324.0105ms
2025-10-04 16:25:52.726 +05:30 [INF] Request starting HTTP/2 GET https://localhost:58476/api/Cart - null null
2025-10-04 16:25:52.738 +05:30 [INF] Executing endpoint 'CartController.Get (ShoeCartBackend)'
2025-10-04 16:25:52.743 +05:30 [INF] Route matched with {action = "Get", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller CartController (ShoeCartBackend).
2025-10-04 16:25:52.761 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[IsDeleted], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[ImageData], [c0].[ImageMimeType], [c0].[Name], [c0].[Price], [c0].[ProductId], [c0].[Quantity], [c0].[Size]
FROM (
    SELECT TOP(1) [c].[Id], [c].[IsDeleted], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
2025-10-04 16:25:52.767 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 16:25:52.777 +05:30 [INF] Executed action CartController.Get (ShoeCartBackend) in 32.4855ms
2025-10-04 16:25:52.779 +05:30 [INF] Executed endpoint 'CartController.Get (ShoeCartBackend)'
2025-10-04 16:25:52.780 +05:30 [INF] Request finished HTTP/2 GET https://localhost:58476/api/Cart - 200 null application/json; charset=utf-8 54.6916ms
2025-10-04 16:26:27.857 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Cart - application/json 53
2025-10-04 16:26:27.869 +05:30 [INF] Executing endpoint 'CartController.Add (ShoeCartBackend)'
2025-10-04 16:26:27.871 +05:30 [INF] Route matched with {action = "Add", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(ShoeCartBackend.DTOs.CartDTO.AddToCartDTO) on controller CartController (ShoeCartBackend).
2025-10-04 16:26:27.893 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Brand], [s].[CategoryId], [s].[CreatedBy], [s].[CreatedOn], [s].[CurrentStock], [s].[DeletedBy], [s].[DeletedOn], [s].[Description], [s].[InStock], [s].[IsActive], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedOn], [s].[Name], [s].[Price], [s].[SpecialOffer], [s].[Id0], [s].[CreatedBy0], [s].[CreatedOn0], [s].[DeletedBy0], [s].[DeletedOn0], [s].[IsDeleted0], [s].[ModifiedBy0], [s].[ModifiedOn0], [s].[Name0], [p0].[Id], [p0].[CreatedBy], [p0].[CreatedOn], [p0].[DeletedBy], [p0].[DeletedOn], [p0].[IsDeleted], [p0].[ModifiedBy], [p0].[ModifiedOn], [p0].[ProductId], [p0].[Size], [p1].[Id], [p1].[CreatedBy], [p1].[CreatedOn], [p1].[DeletedBy], [p1].[DeletedOn], [p1].[ImageData], [p1].[ImageMimeType], [p1].[IsDeleted], [p1].[IsMain], [p1].[ModifiedBy], [p1].[ModifiedOn], [p1].[ProductId]
FROM (
    SELECT TOP(1) [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c].[Id] AS [Id0], [c].[CreatedBy] AS [CreatedBy0], [c].[CreatedOn] AS [CreatedOn0], [c].[DeletedBy] AS [DeletedBy0], [c].[DeletedOn] AS [DeletedOn0], [c].[IsDeleted] AS [IsDeleted0], [c].[ModifiedBy] AS [ModifiedBy0], [c].[ModifiedOn] AS [ModifiedOn0], [c].[Name] AS [Name0]
    FROM [Products] AS [p]
    INNER JOIN [Categories] AS [c] ON [p].[CategoryId] = [c].[Id]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [ProductSize] AS [p0] ON [s].[Id] = [p0].[ProductId]
LEFT JOIN [ProductImage] AS [p1] ON [s].[Id] = [p1].[ProductId]
ORDER BY [s].[Id], [s].[Id0], [p0].[Id]
2025-10-04 16:26:27.904 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[IsDeleted], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[ImageData], [c0].[ImageMimeType], [c0].[Name], [c0].[Price], [c0].[ProductId], [c0].[Quantity], [c0].[Size]
FROM (
    SELECT TOP(1) [c].[Id], [c].[IsDeleted], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
2025-10-04 16:26:27.913 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CartItems] ([CartId], [ImageData], [ImageMimeType], [Name], [Price], [ProductId], [Quantity], [Size])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-10-04 16:26:27.918 +05:30 [INF] Executing ObjectResult, writing value of type 'ShoeCartBackend.Common.ApiResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 16:26:27.919 +05:30 [INF] Executed action CartController.Add (ShoeCartBackend) in 46.7497ms
2025-10-04 16:26:27.922 +05:30 [INF] Executed endpoint 'CartController.Add (ShoeCartBackend)'
2025-10-04 16:26:27.923 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Cart - 200 null application/json; charset=utf-8 68.561ms
2025-10-04 16:27:22.335 +05:30 [INF] Request starting HTTP/2 POST https://localhost:58476/api/Orders/checkout - application/json 164
2025-10-04 16:27:22.350 +05:30 [INF] Executing endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 16:27:22.353 +05:30 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(ShoeCartBackend.DTOs.CreateOrderDto) on controller ShoeCartBackend.Controllers.OrdersController (ShoeCartBackend).
2025-10-04 16:27:22.371 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CartId], [c].[ImageData], [c].[ImageMimeType], [c].[Name], [c].[Price], [c].[ProductId], [c].[Quantity], [c].[Size], [p].[Id], [p].[Brand], [p].[CategoryId], [p].[CreatedBy], [p].[CreatedOn], [p].[CurrentStock], [p].[DeletedBy], [p].[DeletedOn], [p].[Description], [p].[InStock], [p].[IsActive], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedOn], [p].[Name], [p].[Price], [p].[SpecialOffer], [c0].[Id], [c0].[IsDeleted], [c0].[UserId]
FROM [CartItems] AS [c]
INNER JOIN [Carts] AS [c0] ON [c].[CartId] = [c0].[Id]
INNER JOIN [Products] AS [p] ON [c].[ProductId] = [p].[Id]
WHERE [c0].[UserId] = @__userId_0
2025-10-04 16:27:22.384 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p0;
INSERT INTO [Orders] ([BillingCity], [BillingCountry], [BillingState], [BillingStreet], [BillingZip], [CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [IsDeleted], [ModifiedBy], [ModifiedOn], [OrderStatus], [PaymentMethod], [PaymentStatus], [TotalAmount], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2025-10-04 16:27:22.391 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p18='?' (Size = 4000), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (DbType = DateTime2), @p22='?' (Size = 8000) (DbType = Binary), @p23='?' (Size = 4000), @p24='?' (DbType = Boolean), @p25='?' (Size = 4000), @p26='?' (DbType = DateTime2), @p27='?' (Size = 4000), @p28='?' (DbType = Int32), @p29='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p30='?' (DbType = Int32), @p31='?' (DbType = Int32), @p32='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CreatedBy], [CreatedOn], [DeletedBy], [DeletedOn], [ImageData], [ImageMimeType], [IsDeleted], [ModifiedBy], [ModifiedOn], [Name], [OrderId], [Price], [ProductId], [Quantity], [Size])
OUTPUT INSERTED.[Id]
VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32);
2025-10-04 16:27:22.397 +05:30 [INF] Executing OkObjectResult, writing value of type 'OrderDto'.
2025-10-04 16:27:22.399 +05:30 [INF] Executed action ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend) in 43.6654ms
2025-10-04 16:27:22.402 +05:30 [INF] Executed endpoint 'ShoeCartBackend.Controllers.OrdersController.CreateOrder (ShoeCartBackend)'
2025-10-04 16:27:22.404 +05:30 [INF] Request finished HTTP/2 POST https://localhost:58476/api/Orders/checkout - 200 null application/json; charset=utf-8 69.4604ms
